#!/usr/bin/env node
// Freedom CLI - Canvas Game Automation Tool
// Version: 0.1.0
// Build: 2025-09-10T18:29:53.112Z

"use strict";var mi=Object.create;var to=Object.defineProperty;var hi=Object.getOwnPropertyDescriptor;var pi=Object.getOwnPropertyNames;var gi=Object.getPrototypeOf,bi=Object.prototype.hasOwnProperty;var yi=(o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of pi(e))!bi.call(o,s)&&s!==t&&to(o,s,{get:()=>e[s],enumerable:!(n=hi(e,s))||n.enumerable});return o};var V=(o,e,t)=>(t=o!=null?mi(gi(o)):{},yi(e||!o||!o.__esModule?to(t,"default",{value:o,enumerable:!0}):t,o));var Re=V(require("node:process"),1);var Ot=V(require("node:process"),1);var no=(o=0)=>e=>`\x1B[${e+o}m`,oo=(o=0)=>e=>`\x1B[${38+o};5;${e}m`,so=(o=0)=>(e,t,n)=>`\x1B[${38+o};2;${e};${t};${n}m`,Z={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},Sr=Object.keys(Z.modifier),xi=Object.keys(Z.color),wi=Object.keys(Z.bgColor),jr=[...xi,...wi];function Ci(){let o=new Map;for(let[e,t]of Object.entries(Z)){for(let[n,s]of Object.entries(t))Z[n]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},t[n]=Z[n],o.set(s[0],s[1]);Object.defineProperty(Z,e,{value:t,enumerable:!1})}return Object.defineProperty(Z,"codes",{value:o,enumerable:!1}),Z.color.close="\x1B[39m",Z.bgColor.close="\x1B[49m",Z.color.ansi=no(),Z.color.ansi256=oo(),Z.color.ansi16m=so(),Z.bgColor.ansi=no(10),Z.bgColor.ansi256=oo(10),Z.bgColor.ansi16m=so(10),Object.defineProperties(Z,{rgbToAnsi256:{value(e,t,n){return e===t&&t===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5)},enumerable:!1},hexToRgb:{value(e){let t=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!t)return[0,0,0];let[n]=t;n.length===3&&(n=[...n].map(i=>i+i).join(""));let s=Number.parseInt(n,16);return[s>>16&255,s>>8&255,s&255]},enumerable:!1},hexToAnsi256:{value:e=>Z.rgbToAnsi256(...Z.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){if(e<8)return 30+e;if(e<16)return 90+(e-8);let t,n,s;if(e>=232)t=((e-232)*10+8)/255,n=t,s=t;else{e-=16;let c=e%36;t=Math.floor(e/36)/5,n=Math.floor(c/6)/5,s=c%6/5}let i=Math.max(t,n,s)*2;if(i===0)return 30;let r=30+(Math.round(s)<<2|Math.round(n)<<1|Math.round(t));return i===2&&(r+=60),r},enumerable:!1},rgbToAnsi:{value:(e,t,n)=>Z.ansi256ToAnsi(Z.rgbToAnsi256(e,t,n)),enumerable:!1},hexToAnsi:{value:e=>Z.ansi256ToAnsi(Z.hexToAnsi256(e)),enumerable:!1}}),Z}var Ei=Ci(),Me=Ei;var kt=V(require("node:process"),1),ro=V(require("node:os"),1),bn=V(require("node:tty"),1);function xe(o,e=globalThis.Deno?globalThis.Deno.args:kt.default.argv){let t=o.startsWith("-")?"":o.length===1?"-":"--",n=e.indexOf(t+o),s=e.indexOf("--");return n!==-1&&(s===-1||n<s)}var{env:X}=kt.default,Ut;xe("no-color")||xe("no-colors")||xe("color=false")||xe("color=never")?Ut=0:(xe("color")||xe("colors")||xe("color=true")||xe("color=always"))&&(Ut=1);function Oi(){if("FORCE_COLOR"in X)return X.FORCE_COLOR==="true"?1:X.FORCE_COLOR==="false"?0:X.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(X.FORCE_COLOR,10),3)}function $i(o){return o===0?!1:{level:o,hasBasic:!0,has256:o>=2,has16m:o>=3}}function vi(o,{streamIsTTY:e,sniffFlags:t=!0}={}){let n=Oi();n!==void 0&&(Ut=n);let s=t?Ut:n;if(s===0)return 0;if(t){if(xe("color=16m")||xe("color=full")||xe("color=truecolor"))return 3;if(xe("color=256"))return 2}if("TF_BUILD"in X&&"AGENT_NAME"in X)return 1;if(o&&!e&&s===void 0)return 0;let i=s||0;if(X.TERM==="dumb")return i;if(kt.default.platform==="win32"){let r=ro.default.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in X)return["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(r=>r in X)?3:["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(r=>r in X)||X.CI_NAME==="codeship"?1:i;if("TEAMCITY_VERSION"in X)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(X.TEAMCITY_VERSION)?1:0;if(X.COLORTERM==="truecolor"||X.TERM==="xterm-kitty"||X.TERM==="xterm-ghostty"||X.TERM==="wezterm")return 3;if("TERM_PROGRAM"in X){let r=Number.parseInt((X.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(X.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(X.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(X.TERM)||"COLORTERM"in X?1:i}function io(o,e={}){let t=vi(o,{streamIsTTY:o&&o.isTTY,...e});return $i(t)}var _i={stdout:io({isTTY:bn.default.isatty(1)}),stderr:io({isTTY:bn.default.isatty(2)})},ao=_i;function lo(o,e,t){let n=o.indexOf(e);if(n===-1)return o;let s=e.length,i=0,r="";do r+=o.slice(i,n)+e+t,i=n+s,n=o.indexOf(e,i);while(n!==-1);return r+=o.slice(i),r}function co(o,e,t,n){let s=0,i="";do{let r=o[n-1]==="\r";i+=o.slice(s,r?n-1:n)+e+(r?`\r
`:`
`)+t,s=n+1,n=o.indexOf(`
`,s)}while(n!==-1);return i+=o.slice(s),i}var{stdout:fo,stderr:uo}=ao,yn=Symbol("GENERATOR"),dt=Symbol("STYLER"),$t=Symbol("IS_EMPTY"),mo=["ansi","ansi","ansi256","ansi16m"],ut=Object.create(null),Ai=(o,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let t=fo?fo.level:0;o.level=e.level===void 0?t:e.level};var Mi=o=>{let e=(...t)=>t.join(" ");return Ai(e,o),Object.setPrototypeOf(e,vt.prototype),e};function vt(o){return Mi(o)}Object.setPrototypeOf(vt.prototype,Function.prototype);for(let[o,e]of Object.entries(Me))ut[o]={get(){let t=Gt(this,wn(e.open,e.close,this[dt]),this[$t]);return Object.defineProperty(this,o,{value:t}),t}};ut.visible={get(){let o=Gt(this,this[dt],!0);return Object.defineProperty(this,"visible",{value:o}),o}};var xn=(o,e,t,...n)=>o==="rgb"?e==="ansi16m"?Me[t].ansi16m(...n):e==="ansi256"?Me[t].ansi256(Me.rgbToAnsi256(...n)):Me[t].ansi(Me.rgbToAnsi(...n)):o==="hex"?xn("rgb",e,t,...Me.hexToRgb(...n)):Me[t][o](...n),Si=["rgb","hex","ansi256"];for(let o of Si){ut[o]={get(){let{level:t}=this;return function(...n){let s=wn(xn(o,mo[t],"color",...n),Me.color.close,this[dt]);return Gt(this,s,this[$t])}}};let e="bg"+o[0].toUpperCase()+o.slice(1);ut[e]={get(){let{level:t}=this;return function(...n){let s=wn(xn(o,mo[t],"bgColor",...n),Me.bgColor.close,this[dt]);return Gt(this,s,this[$t])}}}}var ji=Object.defineProperties(()=>{},{...ut,level:{enumerable:!0,get(){return this[yn].level},set(o){this[yn].level=o}}}),wn=(o,e,t)=>{let n,s;return t===void 0?(n=o,s=e):(n=t.openAll+o,s=e+t.closeAll),{open:o,close:e,openAll:n,closeAll:s,parent:t}},Gt=(o,e,t)=>{let n=(...s)=>Pi(n,s.length===1?""+s[0]:s.join(" "));return Object.setPrototypeOf(n,ji),n[yn]=o,n[dt]=e,n[$t]=t,n},Pi=(o,e)=>{if(o.level<=0||!e)return o[$t]?"":e;let t=o[dt];if(t===void 0)return e;let{openAll:n,closeAll:s}=t;if(e.includes("\x1B"))for(;t!==void 0;)e=lo(e,t.close,t.open),t=t.parent;let i=e.indexOf(`
`);return i!==-1&&(e=co(e,s,n,i)),n+e+s};Object.defineProperties(vt.prototype,ut);var Fi=vt(),Lr=vt({level:uo?uo.level:0});var a=Fi;var Kt=require("assert");var Ii={right:Ti,center:Ui},Ni=0,Wt=1,Ri=2,Bt=3,Cn=class{constructor(e){var t;this.width=e.width,this.wrap=(t=e.wrap)!==null&&t!==void 0?t:!0,this.rows=[]}span(...e){let t=this.div(...e);t.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let t=e.map(n=>typeof n=="string"?this.colFromString(n):n);return this.rows.push(t),t}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let t=e.split(`
`).map(s=>s.split("	")),n=0;return t.forEach(s=>{s.length>1&&pe.stringWidth(s[0])>n&&(n=Math.min(Math.floor(this.width*.5),pe.stringWidth(s[0])))}),t.forEach(s=>{this.div(...s.map((i,r)=>({text:i.trim(),padding:this.measurePadding(i),width:r===0&&s.length>1?n:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let t=pe.stripAnsi(e);return[0,t.match(/\s*$/)[0].length,0,t.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(t=>{this.rowToString(t,e)}),e.filter(t=>!t.hidden).map(t=>t.text).join(`
`)}rowToString(e,t){return this.rasterize(e).forEach((n,s)=>{let i="";n.forEach((r,c)=>{let{width:g}=e[c],x=this.negatePadding(e[c]),p=r;if(x>pe.stringWidth(r)&&(p+=" ".repeat(x-pe.stringWidth(r))),e[c].align&&e[c].align!=="left"&&this.wrap){let b=Ii[e[c].align];p=b(p,x),pe.stringWidth(p)<x&&(p+=" ".repeat((g||0)-pe.stringWidth(p)-1))}let m=e[c].padding||[0,0,0,0];m[Bt]&&(i+=" ".repeat(m[Bt])),i+=ho(e[c],p,"| "),i+=p,i+=ho(e[c],p," |"),m[Wt]&&(i+=" ".repeat(m[Wt])),s===0&&t.length>0&&(i=this.renderInline(i,t[t.length-1]))}),t.push({text:i.replace(/ +$/,""),span:e.span})}),t}renderInline(e,t){let n=e.match(/^ */),s=n?n[0].length:0,i=t.text,r=pe.stringWidth(i.trimRight());return t.span?this.wrap?s<r?e:(t.hidden=!0,i.trimRight()+" ".repeat(s-r)+e.trimLeft()):(t.hidden=!0,i+e):e}rasterize(e){let t=[],n=this.columnWidths(e),s;return e.forEach((i,r)=>{i.width=n[r],this.wrap?s=pe.wrap(i.text,this.negatePadding(i),{hard:!0}).split(`
`):s=i.text.split(`
`),i.border&&(s.unshift("."+"-".repeat(this.negatePadding(i)+2)+"."),s.push("'"+"-".repeat(this.negatePadding(i)+2)+"'")),i.padding&&(s.unshift(...new Array(i.padding[Ni]||0).fill("")),s.push(...new Array(i.padding[Ri]||0).fill(""))),s.forEach((c,g)=>{t[g]||t.push([]);let x=t[g];for(let p=0;p<r;p++)x[p]===void 0&&x.push("");x.push(c)})}),t}negatePadding(e){let t=e.width||0;return e.padding&&(t-=(e.padding[Bt]||0)+(e.padding[Wt]||0)),e.border&&(t-=4),t}columnWidths(e){if(!this.wrap)return e.map(r=>r.width||pe.stringWidth(r.text));let t=e.length,n=this.width,s=e.map(r=>{if(r.width)return t--,n-=r.width,r.width}),i=t?Math.floor(n/t):0;return s.map((r,c)=>r===void 0?Math.max(i,Di(e[c])):r)}};function ho(o,e,t){return o.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?t:"  ":""}function Di(o){let e=o.padding||[],t=1+(e[Bt]||0)+(e[Wt]||0);return o.border?t+4:t}function Li(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}function Ti(o,e){o=o.trim();let t=pe.stringWidth(o);return t<e?" ".repeat(e-t)+o:o}function Ui(o,e){o=o.trim();let t=pe.stringWidth(o);return t>=e?o:" ".repeat(e-t>>1)+o}var pe;function po(o,e){return pe=e,new Cn({width:o?.width||Li(),wrap:o?.wrap})}var go=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function En(o){return o.replace(go,"")}function bo(o,e){let[t,n]=o.match(go)||["",""];o=En(o);let s="";for(let i=0;i<o.length;i++)i!==0&&i%e===0&&(s+=`
`),s+=o.charAt(i);return t&&n&&(s=`${t}${s}${n}`),s}function On(o){return po(o,{stringWidth:e=>[...e].length,stripAnsi:En,wrap:bo})}var mt=require("path"),zt=require("fs");function yo(o,e){let t=(0,mt.resolve)(".",o),n;for((0,zt.statSync)(t).isDirectory()||(t=(0,mt.dirname)(t));;){if(n=e(t,(0,zt.readdirSync)(t)),n)return(0,mt.resolve)(t,n);if(t=(0,mt.dirname)(n=t),n===t)break}}var No=require("util"),Ro=require("fs"),Do=require("url");var Oo=require("util"),qt=require("path");function Je(o){if(o!==o.toLowerCase()&&o!==o.toUpperCase()||(o=o.toLowerCase()),o.indexOf("-")===-1&&o.indexOf("_")===-1)return o;{let t="",n=!1,s=o.match(/^-+/);for(let i=s?s[0].length:0;i<o.length;i++){let r=o.charAt(i);n&&(n=!1,r=r.toUpperCase()),i!==0&&(r==="-"||r==="_")?n=!0:r!=="-"&&r!=="_"&&(t+=r)}return t}}function Vt(o,e){let t=o.toLowerCase();e=e||"-";let n="";for(let s=0;s<o.length;s++){let i=t.charAt(s),r=o.charAt(s);i!==r&&s>0?n+=`${e}${t.charAt(s)}`:n+=r}return n}function Yt(o){return o==null?!1:typeof o=="number"||/^0x[0-9a-f]+$/i.test(o)?!0:/^0[^.]/.test(o)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(o)}function xo(o){if(Array.isArray(o))return o.map(r=>typeof r!="string"?r+"":r);o=o.trim();let e=0,t=null,n=null,s=null,i=[];for(let r=0;r<o.length;r++){if(t=n,n=o.charAt(r),n===" "&&!s){t!==" "&&e++;continue}n===s?s=null:(n==="'"||n==='"')&&!s&&(s=n),i[e]||(i[e]=""),i[e]+=n}return i}var we;(function(o){o.BOOLEAN="boolean",o.STRING="string",o.NUMBER="number",o.ARRAY="array"})(we||(we={}));var Te,Ht=class{constructor(e){Te=e}parse(e,t){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},t),s=xo(e),i=typeof e=="string",r=ki(Object.assign(Object.create(null),n.alias)),c=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),g=Object.assign(Object.create(null),n.default),x=n.configObjects||[],p=n.envPrefix,m=c["populate--"],b=m?"--":"_",w=Object.create(null),_=Object.create(null),E=n.__||Te.format,h={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},U=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,k=new RegExp("^--"+c["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(f){let u=typeof f=="object"?f.key:f,C=Object.keys(f).map(function(y){return{boolean:"bools",string:"strings",number:"numbers"}[y]}).filter(Boolean).pop();C&&(h[C][u]=!0),h.arrays[u]=!0,h.keys.push(u)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(f){h.bools[f]=!0,h.keys.push(f)}),[].concat(n.string||[]).filter(Boolean).forEach(function(f){h.strings[f]=!0,h.keys.push(f)}),[].concat(n.number||[]).filter(Boolean).forEach(function(f){h.numbers[f]=!0,h.keys.push(f)}),[].concat(n.count||[]).filter(Boolean).forEach(function(f){h.counts[f]=!0,h.keys.push(f)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(f){h.normalize[f]=!0,h.keys.push(f)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([f,u])=>{typeof u=="number"&&(h.nargs[f]=u,h.keys.push(f))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([f,u])=>{typeof u=="function"&&(h.coercions[f]=u,h.keys.push(f))}),typeof n.config<"u"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(f){h.configs[f]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([f,u])=>{(typeof u=="boolean"||typeof u=="function")&&(h.configs[f]=u)})),Ke(n.key,r,n.default,h.arrays),Object.keys(g).forEach(function(f){(h.aliases[f]||[]).forEach(function(u){g[u]=g[f]})});let Y=null;Tt();let W=[],H=Object.assign(Object.create(null),{_:[]}),ke={};for(let f=0;f<s.length;f++){let u=s[f],C=u.replace(/^-{3,}/,"---"),y,d,S,$,I,ce;if(u!=="--"&&/^-/.test(u)&&te(u))ve(u);else if(C.match(/^---+(=|$)/)){ve(u);continue}else if(u.match(/^--.+=/)||!c["short-option-groups"]&&u.match(/^-.+=/))$=u.match(/^--?([^=]+)=([\s\S]*)$/),$!==null&&Array.isArray($)&&$.length>=3&&(R($[1],h.arrays)?f=He(f,$[1],s,$[2]):R($[1],h.nargs)!==!1?f=ft(f,$[1],s,$[2]):q($[1],$[2],!0));else if(u.match(k)&&c["boolean-negation"])$=u.match(k),$!==null&&Array.isArray($)&&$.length>=2&&(d=$[1],q(d,R(d,h.arrays)?[!1]:!1));else if(u.match(/^--.+/)||!c["short-option-groups"]&&u.match(/^-[^-]+/))$=u.match(/^--?(.+)/),$!==null&&Array.isArray($)&&$.length>=2&&(d=$[1],R(d,h.arrays)?f=He(f,d,s):R(d,h.nargs)!==!1?f=ft(f,d,s):(I=s[f+1],I!==void 0&&(!I.match(/^-/)||I.match(U))&&!R(d,h.bools)&&!R(d,h.counts)||/^(true|false)$/.test(I)?(q(d,I),f++):q(d,ne(d))));else if(u.match(/^-.\..+=/))$=u.match(/^-([^=]+)=([\s\S]*)$/),$!==null&&Array.isArray($)&&$.length>=3&&q($[1],$[2]);else if(u.match(/^-.\..+/)&&!u.match(U))I=s[f+1],$=u.match(/^-(.\..+)/),$!==null&&Array.isArray($)&&$.length>=2&&(d=$[1],I!==void 0&&!I.match(/^-/)&&!R(d,h.bools)&&!R(d,h.counts)?(q(d,I),f++):q(d,ne(d)));else if(u.match(/^-[^-]+/)&&!u.match(U)){S=u.slice(1,-1).split(""),y=!1;for(let ue=0;ue<S.length;ue++){if(I=u.slice(ue+2),S[ue+1]&&S[ue+1]==="="){ce=u.slice(ue+3),d=S[ue],R(d,h.arrays)?f=He(f,d,s,ce):R(d,h.nargs)!==!1?f=ft(f,d,s,ce):q(d,ce),y=!0;break}if(I==="-"){q(S[ue],I);continue}if(/[A-Za-z]/.test(S[ue])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(I)&&R(I,h.bools)===!1){q(S[ue],I),y=!0;break}if(S[ue+1]&&S[ue+1].match(/\W/)){q(S[ue],I),y=!0;break}else q(S[ue],ne(S[ue]))}d=u.slice(-1)[0],!y&&d!=="-"&&(R(d,h.arrays)?f=He(f,d,s):R(d,h.nargs)!==!1?f=ft(f,d,s):(I=s[f+1],I!==void 0&&(!/^(-|--)[^-]/.test(I)||I.match(U))&&!R(d,h.bools)&&!R(d,h.counts)||/^(true|false)$/.test(I)?(q(d,I),f++):q(d,ne(d))))}else if(u.match(/^-[0-9]$/)&&u.match(U)&&R(u.slice(1),h.bools))d=u.slice(1),q(d,ne(d));else if(u==="--"){W=s.slice(f+1);break}else if(c["halt-at-non-option"]){W=s.slice(f);break}else ve(u)}B(H,!0),B(H,!1),T(H),ae(),ee(H,h.aliases,g,!0),le(H),c["set-placeholder-key"]&&qe(H),Object.keys(h.counts).forEach(function(f){De(H,f.split("."))||q(f,0)}),m&&W.length&&(H[b]=[]),W.forEach(function(f){H[b].push(f)}),c["camel-case-expansion"]&&c["strip-dashed"]&&Object.keys(H).filter(f=>f!=="--"&&f.includes("-")).forEach(f=>{delete H[f]}),c["strip-aliased"]&&[].concat(...Object.keys(r).map(f=>r[f])).forEach(f=>{c["camel-case-expansion"]&&f.includes("-")&&delete H[f.split(".").map(u=>Je(u)).join(".")],delete H[f]});function ve(f){let u=M("_",f);(typeof u=="string"||typeof u=="number")&&H._.push(u)}function ft(f,u,C,y){let d,S=R(u,h.nargs);if(S=typeof S!="number"||isNaN(S)?1:S,S===0)return Ae(y)||(Y=Error(E("Argument unexpected for: %s",u))),q(u,ne(u)),f;let $=Ae(y)?0:1;if(c["nargs-eats-options"])C.length-(f+1)+$<S&&(Y=Error(E("Not enough arguments following: %s",u))),$=S;else{for(d=f+1;d<C.length&&(!C[d].match(/^-[^0-9]/)||C[d].match(U)||te(C[d]));d++)$++;$<S&&(Y=Error(E("Not enough arguments following: %s",u)))}let I=Math.min($,S);for(!Ae(y)&&I>0&&(q(u,y),I--),d=f+1;d<I+f+1;d++)q(u,C[d]);return f+I}function He(f,u,C,y){let d=[],S=y||C[f+1],$=R(u,h.nargs);if(R(u,h.bools)&&!/^(true|false)$/.test(S))d.push(!0);else if(Ae(S)||Ae(y)&&/^-/.test(S)&&!U.test(S)&&!te(S)){if(g[u]!==void 0){let I=g[u];d=Array.isArray(I)?I:[I]}}else{Ae(y)||d.push(O(u,y,!0));for(let I=f+1;I<C.length&&!(!c["greedy-arrays"]&&d.length>0||$&&typeof $=="number"&&d.length>=$||(S=C[I],/^-/.test(S)&&!U.test(S)&&!te(S)));I++)f=I,d.push(O(u,S,i))}return typeof $=="number"&&($&&d.length<$||isNaN($)&&d.length===0)&&(Y=Error(E("Not enough arguments following: %s",u))),q(u,d),f}function q(f,u,C=i){if(/-/.test(f)&&c["camel-case-expansion"]){let S=f.split(".").map(function($){return Je($)}).join(".");j(f,S)}let y=O(f,u,C),d=f.split(".");Le(H,d,y),h.aliases[f]&&h.aliases[f].forEach(function(S){let $=S.split(".");Le(H,$,y)}),d.length>1&&c["dot-notation"]&&(h.aliases[d[0]]||[]).forEach(function(S){let $=S.split("."),I=[].concat(d);I.shift(),$=$.concat(I),(h.aliases[f]||[]).includes($.join("."))||Le(H,$,y)}),R(f,h.normalize)&&!R(f,h.arrays)&&[f].concat(h.aliases[f]||[]).forEach(function($){Object.defineProperty(ke,$,{enumerable:!0,get(){return u},set(I){u=typeof I=="string"?Te.normalize(I):I}})})}function j(f,u){h.aliases[f]&&h.aliases[f].length||(h.aliases[f]=[u],w[u]=!0),h.aliases[u]&&h.aliases[u].length||j(u,f)}function O(f,u,C){C&&(u=Gi(u)),(R(f,h.bools)||R(f,h.counts))&&typeof u=="string"&&(u=u==="true");let y=Array.isArray(u)?u.map(function(d){return M(f,d)}):M(f,u);return R(f,h.counts)&&(Ae(y)||typeof y=="boolean")&&(y=$n()),R(f,h.normalize)&&R(f,h.arrays)&&(Array.isArray(u)?y=u.map(d=>Te.normalize(d)):y=Te.normalize(u)),y}function M(f,u){return!c["parse-positional-numbers"]&&f==="_"||!R(f,h.strings)&&!R(f,h.bools)&&!Array.isArray(u)&&(Yt(u)&&c["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${u}`)))||!Ae(u)&&R(f,h.numbers))&&(u=Number(u)),u}function T(f){let u=Object.create(null);ee(u,h.aliases,g),Object.keys(h.configs).forEach(function(C){let y=f[C]||u[C];if(y)try{let d=null,S=Te.resolve(Te.cwd(),y),$=h.configs[C];if(typeof $=="function"){try{d=$(S)}catch(I){d=I}if(d instanceof Error){Y=d;return}}else d=Te.require(S);z(d)}catch(d){d.name==="PermissionDenied"?Y=d:f[C]&&(Y=Error(E("Invalid JSON config file: %s",y)))}})}function z(f,u){Object.keys(f).forEach(function(C){let y=f[C],d=u?u+"."+C:C;typeof y=="object"&&y!==null&&!Array.isArray(y)&&c["dot-notation"]?z(y,d):(!De(H,d.split("."))||R(d,h.arrays)&&c["combine-arrays"])&&q(d,y)})}function ae(){typeof x<"u"&&x.forEach(function(f){z(f)})}function B(f,u){if(typeof p>"u")return;let C=typeof p=="string"?p:"",y=Te.env();Object.keys(y).forEach(function(d){if(C===""||d.lastIndexOf(C,0)===0){let S=d.split("__").map(function($,I){return I===0&&($=$.substring(C.length)),Je($)});(u&&h.configs[S.join(".")]||!u)&&!De(f,S)&&q(S.join("."),y[d])}})}function le(f){let u,C=new Set;Object.keys(f).forEach(function(y){if(!C.has(y)&&(u=R(y,h.coercions),typeof u=="function"))try{let d=M(y,u(f[y]));[].concat(h.aliases[y]||[],y).forEach(S=>{C.add(S),f[S]=d})}catch(d){Y=d}})}function qe(f){return h.keys.forEach(u=>{~u.indexOf(".")||typeof f[u]>"u"&&(f[u]=void 0)}),f}function ee(f,u,C,y=!1){Object.keys(C).forEach(function(d){De(f,d.split("."))||(Le(f,d.split("."),C[d]),y&&(_[d]=!0),(u[d]||[]).forEach(function(S){De(f,S.split("."))||Le(f,S.split("."),C[d])}))})}function De(f,u){let C=f;c["dot-notation"]||(u=[u.join(".")]),u.slice(0,-1).forEach(function(d){C=C[d]||{}});let y=u[u.length-1];return typeof C!="object"?!1:y in C}function Le(f,u,C){let y=f;c["dot-notation"]||(u=[u.join(".")]),u.slice(0,-1).forEach(function(ce){ce=wo(ce),typeof y=="object"&&y[ce]===void 0&&(y[ce]={}),typeof y[ce]!="object"||Array.isArray(y[ce])?(Array.isArray(y[ce])?y[ce].push({}):y[ce]=[y[ce],{}],y=y[ce][y[ce].length-1]):y=y[ce]});let d=wo(u[u.length-1]),S=R(u.join("."),h.arrays),$=Array.isArray(C),I=c["duplicate-arguments-array"];!I&&R(d,h.nargs)&&(I=!0,(!Ae(y[d])&&h.nargs[d]===1||Array.isArray(y[d])&&y[d].length===h.nargs[d])&&(y[d]=void 0)),C===$n()?y[d]=$n(y[d]):Array.isArray(y[d])?I&&S&&$?y[d]=c["flatten-duplicate-arrays"]?y[d].concat(C):(Array.isArray(y[d][0])?y[d]:[y[d]]).concat([C]):!I&&!!S==!!$?y[d]=C:y[d]=y[d].concat([C]):y[d]===void 0&&S?y[d]=$?C:[C]:I&&!(y[d]===void 0||R(d,h.counts)||R(d,h.bools))?y[d]=[y[d],C]:y[d]=C}function Ke(...f){f.forEach(function(u){Object.keys(u||{}).forEach(function(C){h.aliases[C]||(h.aliases[C]=[].concat(r[C]||[]),h.aliases[C].concat(C).forEach(function(y){if(/-/.test(y)&&c["camel-case-expansion"]){let d=Je(y);d!==C&&h.aliases[C].indexOf(d)===-1&&(h.aliases[C].push(d),w[d]=!0)}}),h.aliases[C].concat(C).forEach(function(y){if(y.length>1&&/[A-Z]/.test(y)&&c["camel-case-expansion"]){let d=Vt(y,"-");d!==C&&h.aliases[C].indexOf(d)===-1&&(h.aliases[C].push(d),w[d]=!0)}}),h.aliases[C].forEach(function(y){h.aliases[y]=[C].concat(h.aliases[C].filter(function(d){return y!==d}))}))})})}function R(f,u){let C=[].concat(h.aliases[f]||[],f),y=Object.keys(u),d=C.find(S=>y.includes(S));return d?u[d]:!1}function gn(f){let u=Object.keys(h);return[].concat(u.map(y=>h[y])).some(function(y){return Array.isArray(y)?y.includes(f):y[f]})}function N(f,...u){return[].concat(...u).some(function(y){let d=f.match(y);return d&&gn(d[1])})}function Q(f){if(f.match(U)||!f.match(/^-[^-]+/))return!1;let u=!0,C,y=f.slice(1).split("");for(let d=0;d<y.length;d++){if(C=f.slice(d+2),!gn(y[d])){u=!1;break}if(y[d+1]&&y[d+1]==="="||C==="-"||/[A-Za-z]/.test(y[d])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(C)||y[d+1]&&y[d+1].match(/\W/))break}return u}function te(f){return c["unknown-options-as-args"]&&G(f)}function G(f){return f=f.replace(/^-{3,}/,"--"),f.match(U)||Q(f)?!1:!N(f,/^-+([^=]+?)=[\s\S]*$/,k,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function ne(f){return!R(f,h.bools)&&!R(f,h.counts)&&`${f}`in g?g[f]:se(_e(f))}function se(f){return{[we.BOOLEAN]:!0,[we.STRING]:"",[we.NUMBER]:void 0,[we.ARRAY]:[]}[f]}function _e(f){let u=we.BOOLEAN;return R(f,h.strings)?u=we.STRING:R(f,h.numbers)?u=we.NUMBER:R(f,h.bools)?u=we.BOOLEAN:R(f,h.arrays)&&(u=we.ARRAY),u}function Ae(f){return f===void 0}function Tt(){Object.keys(h.counts).find(f=>R(f,h.arrays)?(Y=Error(E("Invalid configuration: %s, opts.count excludes opts.array.",f)),!0):R(f,h.nargs)?(Y=Error(E("Invalid configuration: %s, opts.count excludes opts.narg.",f)),!0):!1)}return{aliases:Object.assign({},h.aliases),argv:Object.assign(ke,H),configuration:c,defaulted:Object.assign({},_),error:Y,newAliases:Object.assign({},w)}}};function ki(o){let e=[],t=Object.create(null),n=!0;for(Object.keys(o).forEach(function(s){e.push([].concat(o[s],s))});n;){n=!1;for(let s=0;s<e.length;s++)for(let i=s+1;i<e.length;i++)if(e[s].filter(function(c){return e[i].indexOf(c)!==-1}).length){e[s]=e[s].concat(e[i]),e.splice(i,1),n=!0;break}}return e.forEach(function(s){s=s.filter(function(r,c,g){return g.indexOf(r)===c});let i=s.pop();i!==void 0&&typeof i=="string"&&(t[i]=s)}),t}function $n(o){return o!==void 0?o+1:1}function wo(o){return o==="__proto__"?"___proto___":o}function Gi(o){return typeof o=="string"&&(o[0]==="'"||o[0]==='"')&&o[o.length-1]===o[0]?o.substring(1,o.length-1):o}var $o=require("fs");var vn,_n,An,Co=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,Eo=(_n=(vn=process==null?void 0:process.versions)===null||vn===void 0?void 0:vn.node)!==null&&_n!==void 0?_n:(An=process==null?void 0:process.version)===null||An===void 0?void 0:An.slice(1);if(Eo&&Number(Eo.match(/^([^.]+)/)[1])<Co)throw Error(`yargs parser supports a minimum Node.js version of ${Co}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var Wi=process?process.env:{},vo=new Ht({cwd:process.cwd,env:()=>Wi,format:Oo.format,normalize:qt.normalize,resolve:qt.resolve,require:o=>{if(typeof require<"u")return require(o);if(o.match(/\.json$/))return JSON.parse((0,$o.readFileSync)(o,"utf8"));throw Error("only .json config files are supported in ESM")}}),_t=function(e,t){return vo.parse(e.slice(),t).argv};_t.detailed=function(o,e){return vo.parse(o.slice(),e)};_t.camelCase=Je;_t.decamelize=Vt;_t.looksLikeNumber=Yt;var Mn=_t;var je=require("path");function _o(){return Bi()?0:1}function Bi(){return zi()&&!process.defaultApp}function zi(){return!!process.versions.electron}function Sn(o){return o.slice(_o()+1)}function Ao(){return process.argv[_o()]}var K=class o extends Error{constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,o)}};var ht=require("fs"),Mo=require("util"),So=require("path"),jo={fs:{readFileSync:ht.readFileSync,writeFile:ht.writeFile},format:Mo.format,resolve:So.resolve,exists:o=>{try{return(0,ht.statSync)(o).isFile()}catch{return!1}}};var Se,jn=class{constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let t=e.shift(),n=function(){};return typeof e[e.length-1]=="function"&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][t]&&this.updateFiles?(this.cache[this.locale][t]=t,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),Se.format.apply(Se.format,[this.cache[this.locale][t]||t].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),t=e.shift(),n=e.shift(),s=e.shift(),i=function(){};typeof e[e.length-1]=="function"&&(i=e.pop()),this.cache[this.locale]||this._readLocaleFile();let r=s===1?t:n;this.cache[this.locale][t]&&(r=this.cache[this.locale][t][s===1?"one":"other"]),!this.cache[this.locale][t]&&this.updateFiles?(this.cache[this.locale][t]={one:t,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:i})):i();let c=[r];return~r.indexOf("%d")&&c.push(s),Se.format.apply(Se.format,c.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.cache[this.locale][t]=e[t])}_taggedLiteral(e,...t){let n="";return e.forEach(function(s,i){let r=t[i+1];n+=s,typeof r<"u"&&(n+="%s")}),this.__.apply(this,[n].concat([].slice.call(t,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,t=this.writeQueue[0],n=t.directory,s=t.locale,i=t.cb,r=this._resolveLocaleFile(n,s),c=JSON.stringify(this.cache[s],null,2);Se.fs.writeFile(r,c,"utf-8",function(g){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),i(g)})}_readLocaleFile(){let e={},t=this._resolveLocaleFile(this.directory,this.locale);try{Se.fs.readFileSync&&(e=JSON.parse(Se.fs.readFileSync(t,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+t),n.code==="ENOENT")e={};else throw n}this.cache[this.locale]=e}_resolveLocaleFile(e,t){let n=Se.resolve(e,"./",t+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~t.lastIndexOf("_")){let s=Se.resolve(e,"./",t.split("_")[0]+".json");this._fileExistsSync(s)&&(n=s)}return n}_fileExistsSync(e){return Se.exists(e)}};function Po(o,e){Se=e;let t=new jn(o);return{__:t.__.bind(t),__n:t.__n.bind(t),setLocale:t.setLocale.bind(t),getLocale:t.getLocale.bind(t),updateLocale:t.updateLocale.bind(t),locale:t.locale}}var Vi=o=>Po(o,jo),Fo=Vi;var qi={},Yi="require is not supported by ESM",Io="loading a directory of commands is not supported yet for ESM",At;try{At=(0,Do.fileURLToPath)(qi.url)}catch{At=process.cwd()}var Hi=At.substring(0,At.lastIndexOf("node_modules")),Pn={assert:{notStrictEqual:Kt.notStrictEqual,strictEqual:Kt.strictEqual},cliui:On,findUp:yo,getEnv:o=>process.env[o],inspect:No.inspect,getCallerFile:()=>{throw new K(Io)},getProcessArgvBin:Ao,mainFilename:Hi||process.cwd(),Parser:Mn,path:{basename:je.basename,dirname:je.dirname,extname:je.extname,relative:je.relative,resolve:je.resolve},process:{argv:()=>process.argv,cwd:process.cwd,emitWarning:(o,e)=>process.emitWarning(o,e),execPath:()=>process.execPath,exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:Ro.readFileSync,require:()=>{throw new K(Yi)},requireDirectory:()=>{throw new K(Io)},stringWidth:o=>[...o].length,y18n:Fo({directory:(0,je.resolve)(At,"../../../locales"),updateFiles:!1})};function me(o,e,t,n){t.assert.notStrictEqual(o,e,n)}function Fn(o,e){e.assert.strictEqual(typeof o,"string")}function pt(o){return Object.keys(o)}function J(o){return!!o&&!!o.then&&typeof o.then=="function"}function Ge(o){let t=o.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,s=t.shift();if(!s)throw new Error(`No command found in: ${o}`);let i={cmd:s.replace(n,""),demanded:[],optional:[]};return t.forEach((r,c)=>{let g=!1;r=r.replace(/\s/g,""),/\.+[\]>]/.test(r)&&c===t.length-1&&(g=!0),/^\[/.test(r)?i.optional.push({cmd:r.replace(n,"").split("|"),variadic:g}):i.demanded.push({cmd:r.replace(n,"").split("|"),variadic:g})}),i}var Ki=["first","second","third","fourth","fifth","sixth"];function v(o,e,t){function n(){return typeof o=="object"?[{demanded:[],optional:[]},o,e]:[Ge(`cmd ${o}`),e,t]}try{let s=0,[i,r,c]=n(),g=[].slice.call(r);for(;g.length&&g[g.length-1]===void 0;)g.pop();let x=c||g.length;if(x<i.demanded.length)throw new K(`Not enough arguments provided. Expected ${i.demanded.length} but received ${g.length}.`);let p=i.demanded.length+i.optional.length;if(x>p)throw new K(`Too many arguments provided. Expected max ${p} but received ${x}.`);i.demanded.forEach(m=>{let b=g.shift(),w=Lo(b);m.cmd.filter(E=>E===w||E==="*").length===0&&To(w,m.cmd,s),s+=1}),i.optional.forEach(m=>{if(g.length===0)return;let b=g.shift(),w=Lo(b);m.cmd.filter(E=>E===w||E==="*").length===0&&To(w,m.cmd,s),s+=1})}catch(s){console.warn(s.stack)}}function Lo(o){return Array.isArray(o)?"array":o===null?"null":typeof o}function To(o,e,t){throw new K(`Invalid ${Ki[t]||"manyith"} argument. Expected ${e.join(" or ")} but received ${o}.`)}var Jt=class{constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,t,n=!0,s=!1){if(v("<array|function> [boolean] [boolean] [boolean]",[e,t,n],arguments.length),Array.isArray(e)){for(let i=0;i<e.length;i++){if(typeof e[i]!="function")throw Error("middleware must be a function");let r=e[i];r.applyBeforeValidation=t,r.global=n}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let i=e;i.applyBeforeValidation=t,i.global=n,i.mutates=s,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,t){let n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(s=>{let i=[...n[t]||[],t];return s.option?!i.includes(s.option):!0}),e.option=t,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function Uo(o){return o?o.map(e=>(e.applyBeforeValidation=!1,e)):[]}function Qe(o,e,t,n){return t.reduce((s,i)=>{if(i.applyBeforeValidation!==n)return s;if(i.mutates){if(i.applied)return s;i.applied=!0}if(J(s))return s.then(r=>Promise.all([r,i(r,e)])).then(([r,c])=>Object.assign(r,c));{let r=i(s,e);return J(r)?r.then(c=>Object.assign(s,c)):Object.assign(s,r)}},o)}function Ze(o,e,t=n=>{throw n}){try{let n=Ji(o)?o():o;return J(n)?n.then(s=>e(s)):e(n)}catch(n){return t(n)}}function Ji(o){return typeof o=="function"}function In(o){if(typeof require>"u")return null;for(let e=0,t=Object.keys(require.cache),n;e<t.length;e++)if(n=require.cache[t[e]],n.exports===o)return n;return null}var gt=/(^\*)|(^\$0)/,Nn=class{constructor(e,t,n,s){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=s,this.usage=e,this.globalMiddleware=n,this.validation=t}addDirectory(e,t,n,s){s=s||{},typeof s.recurse!="boolean"&&(s.recurse=!1),Array.isArray(s.extensions)||(s.extensions=["js"]);let i=typeof s.visit=="function"?s.visit:r=>r;s.visit=(r,c,g)=>{let x=i(r,c,g);if(x){if(this.requireCache.has(c))return x;this.requireCache.add(c),this.addHandler(x)}return x},this.shim.requireDirectory({require:t,filename:n},e,s)}addHandler(e,t,n,s,i,r){let c=[],g=Uo(i);if(s=s||(()=>{}),Array.isArray(e))if(Qi(e))[e,...c]=e;else for(let x of e)this.addHandler(x);else if(Xi(e)){let x=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(x=[].concat(x).concat(e.aliases)),this.addHandler(x,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(ko(n)){this.addHandler([e].concat(c),t,n.builder,n.handler,n.middlewares,n.deprecated);return}if(typeof e=="string"){let x=Ge(e);c=c.map(b=>Ge(b).cmd);let p=!1,m=[x.cmd].concat(c).filter(b=>gt.test(b)?(p=!0,!1):!0);m.length===0&&p&&m.push("$0"),p&&(x.cmd=m[0],c=m.slice(1),e=e.replace(gt,x.cmd)),c.forEach(b=>{this.aliasMap[b]=x.cmd}),t!==!1&&this.usage.command(e,t,p,c,r),this.handlers[x.cmd]={original:e,description:t,handler:s,builder:n||{},middlewares:g,deprecated:r,demanded:x.demanded,optional:x.optional},p&&(this.defaultCommand=this.handlers[x.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,t,n,s,i,r){let c=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,g=t.getInternalMethods().getContext(),x=g.commands.slice(),p=!e;e&&(g.commands.push(e),g.fullCommands.push(c.original));let m=this.applyBuilderUpdateUsageAndParse(p,c,t,n.aliases,x,s,i,r);return J(m)?m.then(b=>this.applyMiddlewareAndGetResult(p,c,b.innerArgv,g,i,b.aliases,t)):this.applyMiddlewareAndGetResult(p,c,m.innerArgv,g,i,m.aliases,t)}applyBuilderUpdateUsageAndParse(e,t,n,s,i,r,c,g){let x=t.builder,p=n;if(Qt(x)){n.getInternalMethods().getUsageInstance().freeze();let m=x(n.getInternalMethods().reset(s),g);if(J(m))return m.then(b=>(p=Wo(b)?b:n,this.parseAndUpdateUsage(e,t,p,i,r,c)))}else Zi(x)&&(n.getInternalMethods().getUsageInstance().freeze(),p=n.getInternalMethods().reset(s),Object.keys(t.builder).forEach(m=>{p.option(m,x[m])}));return this.parseAndUpdateUsage(e,t,p,i,r,c)}parseAndUpdateUsage(e,t,n,s,i,r){e&&n.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(s,t),t.description);let c=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,i,r);return J(c)?c.then(g=>({aliases:n.parsed.aliases,innerArgv:g})):{aliases:n.parsed.aliases,innerArgv:c}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,t){let n=gt.test(t.original)?t.original.replace(gt,"").trim():t.original,s=e.filter(i=>!gt.test(i));return s.push(n),`$0 ${s.join(" ")}`}handleValidationAndGetResult(e,t,n,s,i,r,c,g){if(!r.getInternalMethods().getHasOutput()){let x=r.getInternalMethods().runValidation(i,g,r.parsed.error,e);n=Ze(n,p=>(x(p),p))}if(t.handler&&!r.getInternalMethods().getHasOutput()){r.getInternalMethods().setHasOutput();let x=!!r.getOptions().configuration["populate--"];r.getInternalMethods().postProcess(n,x,!1,!1),n=Qe(n,r,c,!1),n=Ze(n,p=>{let m=t.handler(p);return J(m)?m.then(()=>p):p}),e||r.getInternalMethods().getUsageInstance().cacheHelpMessage(),J(n)&&!r.getInternalMethods().hasParseCallback()&&n.catch(p=>{try{r.getInternalMethods().getUsageInstance().fail(null,p)}catch{}})}return e||(s.commands.pop(),s.fullCommands.pop()),n}applyMiddlewareAndGetResult(e,t,n,s,i,r,c){let g={};if(i)return n;c.getInternalMethods().getHasOutput()||(g=this.populatePositionals(t,n,s,c));let x=this.globalMiddleware.getMiddleware().slice(0).concat(t.middlewares),p=Qe(n,c,x,!0);return J(p)?p.then(m=>this.handleValidationAndGetResult(e,t,m,s,r,c,x,g)):this.handleValidationAndGetResult(e,t,p,s,r,c,x,g)}populatePositionals(e,t,n,s){t._=t._.slice(n.commands.length);let i=e.demanded.slice(0),r=e.optional.slice(0),c={};for(this.validation.positionalCount(i.length,t._.length);i.length;){let g=i.shift();this.populatePositional(g,t,c)}for(;r.length;){let g=r.shift();this.populatePositional(g,t,c)}return t._=n.commands.concat(t._.map(g=>""+g)),this.postProcessPositionals(t,c,this.cmdToParseOptions(e.original),s),c}populatePositional(e,t,n){let s=e.cmd[0];e.variadic?n[s]=t._.splice(0).map(String):t._.length&&(n[s]=[String(t._.shift())])}cmdToParseOptions(e){let t={array:[],default:{},alias:{},demand:{}},n=Ge(e);return n.demanded.forEach(s=>{let[i,...r]=s.cmd;s.variadic&&(t.array.push(i),t.default[i]=[]),t.alias[i]=r,t.demand[i]=!0}),n.optional.forEach(s=>{let[i,...r]=s.cmd;s.variadic&&(t.array.push(i),t.default[i]=[]),t.alias[i]=r}),t}postProcessPositionals(e,t,n,s){let i=Object.assign({},s.getOptions());i.default=Object.assign(n.default,i.default);for(let x of Object.keys(n.alias))i.alias[x]=(i.alias[x]||[]).concat(n.alias[x]);i.array=i.array.concat(n.array),i.config={};let r=[];if(Object.keys(t).forEach(x=>{t[x].map(p=>{i.configuration["unknown-options-as-args"]&&(i.key[x]=!0),r.push(`--${x}`),r.push(p)})}),!r.length)return;let c=Object.assign({},i.configuration,{"populate--":!1}),g=this.shim.Parser.detailed(r,Object.assign({},i,{configuration:c}));if(g.error)s.getInternalMethods().getUsageInstance().fail(g.error.message,g.error);else{let x=Object.keys(t);Object.keys(t).forEach(p=>{x.push(...g.aliases[p])}),Object.keys(g.argv).forEach(p=>{x.includes(p)&&(t[p]||(t[p]=g.argv[p]),!this.isInConfigs(s,p)&&!this.isDefaulted(s,p)&&Object.prototype.hasOwnProperty.call(e,p)&&Object.prototype.hasOwnProperty.call(g.argv,p)&&(Array.isArray(e[p])||Array.isArray(g.argv[p]))?e[p]=[].concat(e[p],g.argv[p]):e[p]=g.argv[p])})}}isDefaulted(e,t){let{default:n}=e.getOptions();return Object.prototype.hasOwnProperty.call(n,t)||Object.prototype.hasOwnProperty.call(n,this.shim.Parser.camelCase(t))}isInConfigs(e,t){let{configObjects:n}=e.getOptions();return n.some(s=>Object.prototype.hasOwnProperty.call(s,t))||n.some(s=>Object.prototype.hasOwnProperty.call(s,this.shim.Parser.camelCase(t)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let n=gt.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(n,this.defaultCommand.description)}let t=this.defaultCommand.builder;if(Qt(t))return t(e,!0);ko(t)||Object.keys(t).forEach(n=>{e.option(n,t[n])})}moduleName(e){let t=In(e);if(!t)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(t.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:t,desc:n}){for(let s of[e,t,n]){if(typeof s=="string"||s===!1)return s;me(s,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();me(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function Go(o,e,t,n){return new Nn(o,e,t,n)}function ko(o){return typeof o=="object"&&!!o.builder&&typeof o.handler=="function"}function Qi(o){return o.every(e=>typeof e=="string")}function Qt(o){return typeof o=="function"}function Zi(o){return typeof o=="object"}function Xi(o){return typeof o=="object"&&!Array.isArray(o)}function We(o={},e=()=>!0){let t={};return pt(o).forEach(n=>{e(n,o[n])&&(t[n]=o[n])}),t}function Be(o){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let t=e;t._handle&&t.isTTY&&typeof t._handle.setBlocking=="function"&&t._handle.setBlocking(o)})}function er(o){return typeof o=="boolean"}function zo(o,e){let t=e.y18n.__,n={},s=[];n.failFn=function(O){s.push(O)};let i=null,r=null,c=!0;n.showHelpOnFail=function(O=!0,M){let[T,z]=typeof O=="string"?[!0,O]:[O,M];return o.getInternalMethods().isGlobalContext()&&(r=z),i=z,c=T,n};let g=!1;n.fail=function(O,M){let T=o.getInternalMethods().getLoggerInstance();if(s.length)for(let z=s.length-1;z>=0;--z){let ae=s[z];if(er(ae)){if(M)throw M;if(O)throw Error(O)}else ae(O,M,n)}else{if(o.getExitProcess()&&Be(!0),!g){g=!0,c&&(o.showHelp("error"),T.error()),(O||M)&&T.error(O||M);let z=i||r;z&&((O||M)&&T.error(""),T.error(z))}if(M=M||new K(O),o.getExitProcess())return o.exit(1);if(o.getInternalMethods().hasParseCallback())return o.exit(1,M);throw M}};let x=[],p=!1;n.usage=(j,O)=>j===null?(p=!0,x=[],n):(p=!1,x.push([j,O||""]),n),n.getUsage=()=>x,n.getUsageDisabled=()=>p,n.getPositionalGroupName=()=>t("Positionals:");let m=[];n.example=(j,O)=>{m.push([j,O||""])};let b=[];n.command=function(O,M,T,z,ae=!1){T&&(b=b.map(B=>(B[2]=!1,B))),b.push([O,M||"",T,z,ae])},n.getCommands=()=>b;let w={};n.describe=function(O,M){Array.isArray(O)?O.forEach(T=>{n.describe(T,M)}):typeof O=="object"?Object.keys(O).forEach(T=>{n.describe(T,O[T])}):w[O]=M},n.getDescriptions=()=>w;let _=[];n.epilog=j=>{_.push(j)};let E=!1,h;n.wrap=j=>{E=!0,h=j},n.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(E||(h=ft(),E=!0),h);let U="__yargsString__:";n.deferY18nLookup=j=>U+j,n.help=function(){if(W)return W;Y();let O=o.customScriptName?o.$0:e.path.basename(o.$0),M=o.getDemandedOptions(),T=o.getDemandedCommands(),z=o.getDeprecatedOptions(),ae=o.getGroups(),B=o.getOptions(),le=[];le=le.concat(Object.keys(w)),le=le.concat(Object.keys(M)),le=le.concat(Object.keys(T)),le=le.concat(Object.keys(B.default)),le=le.filter(ke),le=Object.keys(le.reduce((N,Q)=>(Q!=="_"&&(N[Q]=!0),N),{}));let qe=n.getWrap(),ee=e.cliui({width:qe,wrap:!!qe});if(!p){if(x.length)x.forEach(N=>{ee.div({text:`${N[0].replace(/\$0/g,O)}`}),N[1]&&ee.div({text:`${N[1]}`,padding:[1,0,0,0]})}),ee.div();else if(b.length){let N=null;T._?N=`${O} <${t("command")}>
`:N=`${O} [${t("command")}]
`,ee.div(`${N}`)}}if(b.length>1||b.length===1&&!b[0][2]){ee.div(t("Commands:"));let N=o.getInternalMethods().getContext(),Q=N.commands.length?`${N.commands.join(" ")} `:"";o.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(b=b.sort((G,ne)=>G[0].localeCompare(ne[0])));let te=O?`${O} `:"";b.forEach(G=>{let ne=`${te}${Q}${G[0].replace(/^\$0 ?/,"")}`;ee.span({text:ne,padding:[0,2,0,2],width:k(b,qe,`${O}${Q}`)+4},{text:G[1]});let se=[];G[2]&&se.push(`[${t("default")}]`),G[3]&&G[3].length&&se.push(`[${t("aliases:")} ${G[3].join(", ")}]`),G[4]&&(typeof G[4]=="string"?se.push(`[${t("deprecated: %s",G[4])}]`):se.push(`[${t("deprecated")}]`)),se.length?ee.div({text:se.join(" "),padding:[0,0,0,2],align:"right"}):ee.div()}),ee.div()}let De=(Object.keys(B.alias)||[]).concat(Object.keys(o.parsed.newAliases)||[]);le=le.filter(N=>!o.parsed.newAliases[N]&&De.every(Q=>(B.alias[Q]||[]).indexOf(N)===-1));let Le=t("Options:");ae[Le]||(ae[Le]=[]),H(le,B.alias,ae,Le);let Ke=N=>/^--/.test(Zt(N)),R=Object.keys(ae).filter(N=>ae[N].length>0).map(N=>{let Q=ae[N].filter(ke).map(te=>{if(De.includes(te))return te;for(let G=0,ne;(ne=De[G])!==void 0;G++)if((B.alias[ne]||[]).includes(te))return ne;return te});return{groupName:N,normalizedKeys:Q}}).filter(({normalizedKeys:N})=>N.length>0).map(({groupName:N,normalizedKeys:Q})=>{let te=Q.reduce((G,ne)=>(G[ne]=[ne].concat(B.alias[ne]||[]).map(se=>N===n.getPositionalGroupName()?se:(/^[0-9]$/.test(se)?B.boolean.includes(ne)?"-":"--":se.length>1?"--":"-")+se).sort((se,_e)=>Ke(se)===Ke(_e)?0:Ke(se)?1:-1).join(", "),G),{});return{groupName:N,normalizedKeys:Q,switches:te}});if(R.filter(({groupName:N})=>N!==n.getPositionalGroupName()).some(({normalizedKeys:N,switches:Q})=>!N.every(te=>Ke(Q[te])))&&R.filter(({groupName:N})=>N!==n.getPositionalGroupName()).forEach(({normalizedKeys:N,switches:Q})=>{N.forEach(te=>{Ke(Q[te])&&(Q[te]=tr(Q[te],4))})}),R.forEach(({groupName:N,normalizedKeys:Q,switches:te})=>{ee.div(N),Q.forEach(G=>{let ne=te[G],se=w[G]||"",_e=null;se.includes(U)&&(se=t(se.substring(U.length))),B.boolean.includes(G)&&(_e=`[${t("boolean")}]`),B.count.includes(G)&&(_e=`[${t("count")}]`),B.string.includes(G)&&(_e=`[${t("string")}]`),B.normalize.includes(G)&&(_e=`[${t("string")}]`),B.array.includes(G)&&(_e=`[${t("array")}]`),B.number.includes(G)&&(_e=`[${t("number")}]`);let Ae=u=>typeof u=="string"?`[${t("deprecated: %s",u)}]`:`[${t("deprecated")}]`,Tt=[G in z?Ae(z[G]):null,_e,G in M?`[${t("required")}]`:null,B.choices&&B.choices[G]?`[${t("choices:")} ${n.stringifiedValues(B.choices[G])}]`:null,ve(B.default[G],B.defaultDescription[G])].filter(Boolean).join(" ");ee.span({text:Zt(ne),padding:[0,2,0,2+Bo(ne)],width:k(te,qe)+4},se);let f=o.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;Tt&&!f?ee.div({text:Tt,padding:[0,0,0,2],align:"right"}):ee.div()}),ee.div()}),m.length&&(ee.div(t("Examples:")),m.forEach(N=>{N[0]=N[0].replace(/\$0/g,O)}),m.forEach(N=>{N[1]===""?ee.div({text:N[0],padding:[0,2,0,2]}):ee.div({text:N[0],padding:[0,2,0,2],width:k(m,qe)+4},{text:N[1]})}),ee.div()),_.length>0){let N=_.map(Q=>Q.replace(/\$0/g,O)).join(`
`);ee.div(`${N}
`)}return ee.toString().replace(/\s*$/,"")};function k(j,O,M){let T=0;return Array.isArray(j)||(j=Object.values(j).map(z=>[z])),j.forEach(z=>{T=Math.max(e.stringWidth(M?`${M} ${Zt(z[0])}`:Zt(z[0]))+Bo(z[0]),T)}),O&&(T=Math.min(T,parseInt((O*.5).toString(),10))),T}function Y(){let j=o.getDemandedOptions(),O=o.getOptions();(Object.keys(O.alias)||[]).forEach(M=>{O.alias[M].forEach(T=>{w[T]&&n.describe(M,w[T]),T in j&&o.demandOption(M,j[T]),O.boolean.includes(T)&&o.boolean(M),O.count.includes(T)&&o.count(M),O.string.includes(T)&&o.string(M),O.normalize.includes(T)&&o.normalize(M),O.array.includes(T)&&o.array(M),O.number.includes(T)&&o.number(M)})})}let W;n.cacheHelpMessage=function(){W=this.help()},n.clearCachedHelpMessage=function(){W=void 0},n.hasCachedHelpMessage=function(){return!!W};function H(j,O,M,T){let z=[],ae=null;return Object.keys(M).forEach(B=>{z=z.concat(M[B])}),j.forEach(B=>{ae=[B].concat(O[B]),ae.some(le=>z.indexOf(le)!==-1)||M[T].push(B)}),z}function ke(j){return o.getOptions().hiddenOptions.indexOf(j)<0||o.parsed.argv[o.getOptions().showHiddenOpt]}n.showHelp=j=>{let O=o.getInternalMethods().getLoggerInstance();j||(j="error"),(typeof j=="function"?j:O[j])(n.help())},n.functionDescription=j=>["(",j.name?e.Parser.decamelize(j.name,"-"):t("generated-value"),")"].join(""),n.stringifiedValues=function(O,M){let T="",z=M||", ",ae=[].concat(O);return!O||!ae.length||ae.forEach(B=>{T.length&&(T+=z),T+=JSON.stringify(B)}),T};function ve(j,O){let M=`[${t("default:")} `;if(j===void 0&&!O)return null;if(O)M+=O;else switch(typeof j){case"string":M+=`"${j}"`;break;case"object":M+=JSON.stringify(j);break;default:M+=j}return`${M}]`}function ft(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}let He=null;n.version=j=>{He=j},n.showVersion=j=>{let O=o.getInternalMethods().getLoggerInstance();j||(j="error"),(typeof j=="function"?j:O[j])(He)},n.reset=function(O){return i=null,g=!1,x=[],p=!1,_=[],m=[],b=[],w=We(w,M=>!O[M]),n};let q=[];return n.freeze=function(){q.push({failMessage:i,failureOutput:g,usages:x,usageDisabled:p,epilogs:_,examples:m,commands:b,descriptions:w})},n.unfreeze=function(O=!1){let M=q.pop();M&&(O?(w={...M.descriptions,...w},b=[...M.commands,...b],x=[...M.usages,...x],m=[...M.examples,...m],_=[...M.epilogs,..._]):{failMessage:i,failureOutput:g,usages:x,usageDisabled:p,epilogs:_,examples:m,commands:b,descriptions:w}=M)},n}function Rn(o){return typeof o=="object"}function tr(o,e){return Rn(o)?{text:o.text,indentation:o.indentation+e}:{text:o,indentation:e}}function Bo(o){return Rn(o)?o.indentation:0}function Zt(o){return Rn(o)?o.text:o}var Vo=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,Yo=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var Dn=class{constructor(e,t,n,s){var i,r,c;this.yargs=e,this.usage=t,this.command=n,this.shim=s,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(c=((i=this.shim.getEnv("SHELL"))===null||i===void 0?void 0:i.includes("zsh"))||((r=this.shim.getEnv("ZSH_NAME"))===null||r===void 0?void 0:r.includes("zsh")))!==null&&c!==void 0?c:!1}defaultCompletion(e,t,n,s){let i=this.command.getCommandHandlers();for(let c=0,g=e.length;c<g;++c)if(i[e[c]]&&i[e[c]].builder){let x=i[e[c]].builder;if(Qt(x)){this.indexAfterLastReset=c+1;let p=this.yargs.getInternalMethods().reset();return x(p,!0),p.argv}}let r=[];this.commandCompletions(r,e,n),this.optionCompletions(r,e,t,n),this.choicesFromOptionsCompletions(r,e,t,n),this.choicesFromPositionalsCompletions(r,e,t,n),s(null,r)}commandCompletions(e,t,n){let s=this.yargs.getInternalMethods().getContext().commands;!n.match(/^-/)&&s[s.length-1]!==n&&!this.previousArgHasChoices(t)&&this.usage.getCommands().forEach(i=>{let r=Ge(i[0]).cmd;if(t.indexOf(r)===-1)if(!this.zshShell)e.push(r);else{let c=i[1]||"";e.push(r.replace(/:/g,"\\:")+":"+c)}})}optionCompletions(e,t,n,s){if((s.match(/^-/)||s===""&&e.length===0)&&!this.previousArgHasChoices(t)){let i=this.yargs.getOptions(),r=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(i.key).forEach(c=>{let g=!!i.configuration["boolean-negation"]&&i.boolean.includes(c);!r.includes(c)&&!i.hiddenOptions.includes(c)&&!this.argsContainKey(t,c,g)&&this.completeOptionKey(c,e,s,g&&!!i.default[c])})}}choicesFromOptionsCompletions(e,t,n,s){if(this.previousArgHasChoices(t)){let i=this.getPreviousArgChoices(t);i&&i.length>0&&e.push(...i.map(r=>r.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,t,n,s){if(s===""&&e.length>0&&this.previousArgHasChoices(t))return;let i=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],r=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),c=i[n._.length-r-1];if(!c)return;let g=this.yargs.getOptions().choices[c]||[];for(let x of g)x.startsWith(s)&&e.push(x.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let t=e[e.length-1],n="";if(!t.startsWith("-")&&e.length>1&&(n=t,t=e[e.length-2]),!t.startsWith("-"))return;let s=t.replace(/^-+/,""),i=this.yargs.getOptions(),r=[s,...this.yargs.getAliases()[s]||[]],c;for(let g of r)if(Object.prototype.hasOwnProperty.call(i.key,g)&&Array.isArray(i.choices[g])){c=i.choices[g];break}if(c)return c.filter(g=>!n||g.startsWith(n))}previousArgHasChoices(e){let t=this.getPreviousArgChoices(e);return t!==void 0&&t.length>0}argsContainKey(e,t,n){let s=i=>e.indexOf((/^[^0-9]$/.test(i)?"-":"--")+i)!==-1;if(s(t)||n&&s(`no-${t}`))return!0;if(this.aliases){for(let i of this.aliases[t])if(s(i))return!0}return!1}completeOptionKey(e,t,n,s){var i,r,c,g;let x=e;if(this.zshShell){let w=this.usage.getDescriptions(),_=(r=(i=this===null||this===void 0?void 0:this.aliases)===null||i===void 0?void 0:i[e])===null||r===void 0?void 0:r.find(U=>{let k=w[U];return typeof k=="string"&&k.length>0}),E=_?w[_]:void 0,h=(g=(c=w[e])!==null&&c!==void 0?c:E)!==null&&g!==void 0?g:"";x=`${e.replace(/:/g,"\\:")}:${h.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let p=w=>/^--/.test(w),m=w=>/^[^0-9]$/.test(w),b=!p(n)&&m(e)?"-":"--";t.push(b+x),s&&t.push(b+"no-"+x)}customCompletion(e,t,n,s){if(me(this.customCompletionFunction,null,this.shim),or(this.customCompletionFunction)){let i=this.customCompletionFunction(n,t);return J(i)?i.then(r=>{this.shim.process.nextTick(()=>{s(null,r)})}).catch(r=>{this.shim.process.nextTick(()=>{s(r,void 0)})}):s(null,i)}else return sr(this.customCompletionFunction)?this.customCompletionFunction(n,t,(i=s)=>this.defaultCompletion(e,t,n,i),i=>{s(null,i)}):this.customCompletionFunction(n,t,i=>{s(null,i)})}getCompletion(e,t){let n=e.length?e[e.length-1]:"",s=this.yargs.parse(e,!0),i=this.customCompletionFunction?r=>this.customCompletion(e,r,n,t):r=>this.defaultCompletion(e,r,n,t);return J(s)?s.then(i):i(s)}generateCompletionScript(e,t){let n=this.zshShell?Yo:Vo,s=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),n=n.replace(/{{app_name}}/g,s),n=n.replace(/{{completion_command}}/g,t),n.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function Ho(o,e,t,n){return new Dn(o,e,t,n)}function or(o){return o.length<3}function sr(o){return o.length>3}function qo(o,e){if(o.length===0)return e.length;if(e.length===0)return o.length;let t=[],n;for(n=0;n<=e.length;n++)t[n]=[n];let s;for(s=0;s<=o.length;s++)t[0][s]=s;for(n=1;n<=e.length;n++)for(s=1;s<=o.length;s++)e.charAt(n-1)===o.charAt(s-1)?t[n][s]=t[n-1][s-1]:n>1&&s>1&&e.charAt(n-2)===o.charAt(s-1)&&e.charAt(n-1)===o.charAt(s-2)?t[n][s]=t[n-2][s-2]+1:t[n][s]=Math.min(t[n-1][s-1]+1,Math.min(t[n][s-1]+1,t[n-1][s]+1));return t[e.length][o.length]}var Ko=["$0","--","_"];function Jo(o,e,t){let n=t.y18n.__,s=t.y18n.__n,i={};i.nonOptionCount=function(m){let b=o.getDemandedCommands(),_=m._.length+(m["--"]?m["--"].length:0)-o.getInternalMethods().getContext().commands.length;b._&&(_<b._.min||_>b._.max)&&(_<b._.min?b._.minMsg!==void 0?e.fail(b._.minMsg?b._.minMsg.replace(/\$0/g,_.toString()).replace(/\$1/,b._.min.toString()):null):e.fail(s("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",_,_.toString(),b._.min.toString())):_>b._.max&&(b._.maxMsg!==void 0?e.fail(b._.maxMsg?b._.maxMsg.replace(/\$0/g,_.toString()).replace(/\$1/,b._.max.toString()):null):e.fail(s("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",_,_.toString(),b._.max.toString()))))},i.positionalCount=function(m,b){b<m&&e.fail(s("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",b,b+"",m+""))},i.requiredArguments=function(m,b){let w=null;for(let _ of Object.keys(b))(!Object.prototype.hasOwnProperty.call(m,_)||typeof m[_]>"u")&&(w=w||{},w[_]=b[_]);if(w){let _=[];for(let h of Object.keys(w)){let U=w[h];U&&_.indexOf(U)<0&&_.push(U)}let E=_.length?`
${_.join(`
`)}`:"";e.fail(s("Missing required argument: %s","Missing required arguments: %s",Object.keys(w).length,Object.keys(w).join(", ")+E))}},i.unknownArguments=function(m,b,w,_,E=!0){var h;let U=o.getInternalMethods().getCommandInstance().getCommands(),k=[],Y=o.getInternalMethods().getContext();if(Object.keys(m).forEach(W=>{!Ko.includes(W)&&!Object.prototype.hasOwnProperty.call(w,W)&&!Object.prototype.hasOwnProperty.call(o.getInternalMethods().getParseContext(),W)&&!i.isValidAndSomeAliasIsNotNew(W,b)&&k.push(W)}),E&&(Y.commands.length>0||U.length>0||_)&&m._.slice(Y.commands.length).forEach(W=>{U.includes(""+W)||k.push(""+W)}),E){let H=((h=o.getDemandedCommands()._)===null||h===void 0?void 0:h.max)||0,ke=Y.commands.length+H;ke<m._.length&&m._.slice(ke).forEach(ve=>{ve=String(ve),!Y.commands.includes(ve)&&!k.includes(ve)&&k.push(ve)})}k.length&&e.fail(s("Unknown argument: %s","Unknown arguments: %s",k.length,k.map(W=>W.trim()?W:`"${W}"`).join(", ")))},i.unknownCommands=function(m){let b=o.getInternalMethods().getCommandInstance().getCommands(),w=[],_=o.getInternalMethods().getContext();return(_.commands.length>0||b.length>0)&&m._.slice(_.commands.length).forEach(E=>{b.includes(""+E)||w.push(""+E)}),w.length>0?(e.fail(s("Unknown command: %s","Unknown commands: %s",w.length,w.join(", "))),!0):!1},i.isValidAndSomeAliasIsNotNew=function(m,b){if(!Object.prototype.hasOwnProperty.call(b,m))return!1;let w=o.parsed.newAliases;return[m,...b[m]].some(_=>!Object.prototype.hasOwnProperty.call(w,_)||!w[m])},i.limitedChoices=function(m){let b=o.getOptions(),w={};if(!Object.keys(b.choices).length)return;Object.keys(m).forEach(h=>{Ko.indexOf(h)===-1&&Object.prototype.hasOwnProperty.call(b.choices,h)&&[].concat(m[h]).forEach(U=>{b.choices[h].indexOf(U)===-1&&U!==void 0&&(w[h]=(w[h]||[]).concat(U))})});let _=Object.keys(w);if(!_.length)return;let E=n("Invalid values:");_.forEach(h=>{E+=`
  ${n("Argument: %s, Given: %s, Choices: %s",h,e.stringifiedValues(w[h]),e.stringifiedValues(b.choices[h]))}`}),e.fail(E)};let r={};i.implies=function(m,b){v("<string|object> [array|number|string]",[m,b],arguments.length),typeof m=="object"?Object.keys(m).forEach(w=>{i.implies(w,m[w])}):(o.global(m),r[m]||(r[m]=[]),Array.isArray(b)?b.forEach(w=>i.implies(m,w)):(me(b,void 0,t),r[m].push(b)))},i.getImplied=function(){return r};function c(p,m){let b=Number(m);return m=isNaN(b)?m:b,typeof m=="number"?m=p._.length>=m:m.match(/^--no-.+/)?(m=m.match(/^--no-(.+)/)[1],m=!Object.prototype.hasOwnProperty.call(p,m)):m=Object.prototype.hasOwnProperty.call(p,m),m}i.implications=function(m){let b=[];if(Object.keys(r).forEach(w=>{let _=w;(r[w]||[]).forEach(E=>{let h=_,U=E;h=c(m,h),E=c(m,E),h&&!E&&b.push(` ${_} -> ${U}`)})}),b.length){let w=`${n("Implications failed:")}
`;b.forEach(_=>{w+=_}),e.fail(w)}};let g={};i.conflicts=function(m,b){v("<string|object> [array|string]",[m,b],arguments.length),typeof m=="object"?Object.keys(m).forEach(w=>{i.conflicts(w,m[w])}):(o.global(m),g[m]||(g[m]=[]),Array.isArray(b)?b.forEach(w=>i.conflicts(m,w)):g[m].push(b))},i.getConflicting=()=>g,i.conflicting=function(m){Object.keys(m).forEach(b=>{g[b]&&g[b].forEach(w=>{w&&m[b]!==void 0&&m[w]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",b,w))})}),o.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(g).forEach(b=>{g[b].forEach(w=>{w&&m[t.Parser.camelCase(b)]!==void 0&&m[t.Parser.camelCase(w)]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",b,w))})})},i.recommendCommands=function(m,b){b=b.sort((h,U)=>U.length-h.length);let _=null,E=1/0;for(let h=0,U;(U=b[h])!==void 0;h++){let k=qo(m,U);k<=3&&k<E&&(E=k,_=U)}_&&e.fail(n("Did you mean %s?",_))},i.reset=function(m){return r=We(r,b=>!m[b]),g=We(g,b=>!m[b]),i};let x=[];return i.freeze=function(){x.push({implied:r,conflicting:g})},i.unfreeze=function(){let m=x.pop();me(m,void 0,t),{implied:r,conflicting:g}=m},i}var Ln=[],Mt;function St(o,e,t,n){Mt=n;let s={};if(Object.prototype.hasOwnProperty.call(o,"extends")){if(typeof o.extends!="string")return s;let i=/\.json|\..*rc$/.test(o.extends),r=null;if(i)r=rr(e,o.extends);else try{r=require.resolve(o.extends)}catch{return o}ir(r),Ln.push(r),s=i?JSON.parse(Mt.readFileSync(r,"utf8")):require(o.extends),delete o.extends,s=St(s,Mt.path.dirname(r),t,Mt)}return Ln=[],t?Qo(s,o):Object.assign({},s,o)}function ir(o){if(Ln.indexOf(o)>-1)throw new K(`Circular extended configurations: '${o}'.`)}function rr(o,e){return Mt.path.resolve(o,e)}function Qo(o,e){let t={};function n(s){return s&&typeof s=="object"&&!Array.isArray(s)}Object.assign(t,o);for(let s of Object.keys(e))n(e[s])&&n(t[s])?t[s]=Qo(o[s],e[s]):t[s]=e[s];return t}var A=function(o,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?o!==e||!s:!e.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(o,t):s?s.value=t:e.set(o,t),t},l=function(o,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?o!==e||!n:!e.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(o):n?n.value:e.get(o)},ie,Xe,jt,Ce,ge,Xt,ze,et,en,Ee,tn,Oe,Ie,be,$e,nn,bt,fe,P,on,sn,ye,tt,yt,nt,Ve,rn,D,ot,st,it,L,an,Ne,oe;function bs(o){return(e=[],t=o.process.cwd(),n)=>{let s=new qn(e,t,n,o);return Object.defineProperty(s,"argv",{get:()=>s.parse(),enumerable:!0}),s.help(),s.version(),s}}var Zo=Symbol("copyDoubleDash"),Xo=Symbol("copyDoubleDash"),Tn=Symbol("deleteFromParserHintObject"),es=Symbol("emitWarning"),ts=Symbol("freeze"),ns=Symbol("getDollarZero"),rt=Symbol("getParserConfiguration"),os=Symbol("getUsageConfiguration"),Un=Symbol("guessLocale"),ss=Symbol("guessVersion"),is=Symbol("parsePositionalNumbers"),kn=Symbol("pkgUp"),Ye=Symbol("populateParserHintArray"),xt=Symbol("populateParserHintSingleValueDictionary"),Gn=Symbol("populateParserHintArrayDictionary"),Wn=Symbol("populateParserHintDictionary"),Bn=Symbol("sanitizeKey"),zn=Symbol("setKey"),Vn=Symbol("unfreeze"),rs=Symbol("validateAsync"),as=Symbol("getCommandInstance"),ls=Symbol("getContext"),cs=Symbol("getHasOutput"),fs=Symbol("getLoggerInstance"),ds=Symbol("getParseContext"),us=Symbol("getUsageInstance"),ms=Symbol("getValidationInstance"),ln=Symbol("hasParseCallback"),hs=Symbol("isGlobalContext"),at=Symbol("postProcess"),ps=Symbol("rebase"),Yn=Symbol("reset"),Pt=Symbol("runYargsParserAndExecuteCommands"),Hn=Symbol("runValidation"),gs=Symbol("setHasOutput"),lt=Symbol("kTrackManuallySetKeys"),qn=class{constructor(e=[],t,n,s){this.customScriptName=!1,this.parsed=!1,ie.set(this,void 0),Xe.set(this,void 0),jt.set(this,{commands:[],fullCommands:[]}),Ce.set(this,null),ge.set(this,null),Xt.set(this,"show-hidden"),ze.set(this,null),et.set(this,!0),en.set(this,{}),Ee.set(this,!0),tn.set(this,[]),Oe.set(this,void 0),Ie.set(this,{}),be.set(this,!1),$e.set(this,null),nn.set(this,!0),bt.set(this,void 0),fe.set(this,""),P.set(this,void 0),on.set(this,void 0),sn.set(this,{}),ye.set(this,null),tt.set(this,null),yt.set(this,{}),nt.set(this,{}),Ve.set(this,void 0),rn.set(this,!1),D.set(this,void 0),ot.set(this,!1),st.set(this,!1),it.set(this,!1),L.set(this,void 0),an.set(this,{}),Ne.set(this,null),oe.set(this,void 0),A(this,D,s,"f"),A(this,Ve,e,"f"),A(this,Xe,t,"f"),A(this,on,n,"f"),A(this,Oe,new Jt(this),"f"),this.$0=this[ns](),this[Yn](),A(this,ie,l(this,ie,"f"),"f"),A(this,L,l(this,L,"f"),"f"),A(this,oe,l(this,oe,"f"),"f"),A(this,P,l(this,P,"f"),"f"),l(this,P,"f").showHiddenOpt=l(this,Xt,"f"),A(this,bt,this[Xo](),"f")}addHelpOpt(e,t){let n="help";return v("[string|boolean] [string]",[e,t],arguments.length),l(this,$e,"f")&&(this[Tn](l(this,$e,"f")),A(this,$e,null,"f")),e===!1&&t===void 0?this:(A(this,$e,typeof e=="string"?e:n,"f"),this.boolean(l(this,$e,"f")),this.describe(l(this,$e,"f"),t||l(this,L,"f").deferY18nLookup("Show help")),this)}help(e,t){return this.addHelpOpt(e,t)}addShowHiddenOpt(e,t){if(v("[string|boolean] [string]",[e,t],arguments.length),e===!1&&t===void 0)return this;let n=typeof e=="string"?e:l(this,Xt,"f");return this.boolean(n),this.describe(n,t||l(this,L,"f").deferY18nLookup("Show hidden options")),l(this,P,"f").showHiddenOpt=n,this}showHidden(e,t){return this.addShowHiddenOpt(e,t)}alias(e,t){return v("<object|string|array> [string|array]",[e,t],arguments.length),this[Gn](this.alias.bind(this),"alias",e,t),this}array(e){return v("<array|string>",[e],arguments.length),this[Ye]("array",e),this[lt](e),this}boolean(e){return v("<array|string>",[e],arguments.length),this[Ye]("boolean",e),this[lt](e),this}check(e,t){return v("<function> [boolean]",[e,t],arguments.length),this.middleware((n,s)=>Ze(()=>e(n,s.getOptions()),i=>(i?(typeof i=="string"||i instanceof Error)&&l(this,L,"f").fail(i.toString(),i):l(this,L,"f").fail(l(this,D,"f").y18n.__("Argument check failed: %s",e.toString())),n),i=>(l(this,L,"f").fail(i.message?i.message:i.toString(),i),n)),!1,t),this}choices(e,t){return v("<object|string|array> [string|array]",[e,t],arguments.length),this[Gn](this.choices.bind(this),"choices",e,t),this}coerce(e,t){if(v("<object|string|array> [function]",[e,t],arguments.length),Array.isArray(e)){if(!t)throw new K("coerce callback must be provided");for(let n of e)this.coerce(n,t);return this}else if(typeof e=="object"){for(let n of Object.keys(e))this.coerce(n,e[n]);return this}if(!t)throw new K("coerce callback must be provided");return l(this,P,"f").key[e]=!0,l(this,Oe,"f").addCoerceMiddleware((n,s)=>{let i;return Object.prototype.hasOwnProperty.call(n,e)?Ze(()=>(i=s.getAliases(),t(n[e])),c=>{n[e]=c;let g=s.getInternalMethods().getParserConfiguration()["strip-aliased"];if(i[e]&&g!==!0)for(let x of i[e])n[x]=c;return n},c=>{throw new K(c.message)}):n},e),this}conflicts(e,t){return v("<string|object> [string|array]",[e,t],arguments.length),l(this,oe,"f").conflicts(e,t),this}config(e="config",t,n){return v("[object|string] [string|function] [function]",[e,t,n],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=St(e,l(this,Xe,"f"),this[rt]()["deep-merge-config"]||!1,l(this,D,"f")),l(this,P,"f").configObjects=(l(this,P,"f").configObjects||[]).concat(e),this):(typeof t=="function"&&(n=t,t=void 0),this.describe(e,t||l(this,L,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(s=>{l(this,P,"f").config[s]=n||!0}),this)}completion(e,t,n){return v("[string] [string|boolean|function] [function]",[e,t,n],arguments.length),typeof t=="function"&&(n=t,t=void 0),A(this,ge,e||l(this,ge,"f")||"completion","f"),!t&&t!==!1&&(t="generate completion script"),this.command(l(this,ge,"f"),t),n&&l(this,Ce,"f").registerFunction(n),this}command(e,t,n,s,i,r){return v("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,t,n,s,i,r],arguments.length),l(this,ie,"f").addHandler(e,t,n,s,i,r),this}commands(e,t,n,s,i,r){return this.command(e,t,n,s,i,r)}commandDir(e,t){v("<string> [object]",[e,t],arguments.length);let n=l(this,on,"f")||l(this,D,"f").require;return l(this,ie,"f").addDirectory(e,n,l(this,D,"f").getCallerFile(),t),this}count(e){return v("<array|string>",[e],arguments.length),this[Ye]("count",e),this[lt](e),this}default(e,t,n){return v("<object|string|array> [*] [string]",[e,t,n],arguments.length),n&&(Fn(e,l(this,D,"f")),l(this,P,"f").defaultDescription[e]=n),typeof t=="function"&&(Fn(e,l(this,D,"f")),l(this,P,"f").defaultDescription[e]||(l(this,P,"f").defaultDescription[e]=l(this,L,"f").functionDescription(t)),t=t.call()),this[xt](this.default.bind(this),"default",e,t),this}defaults(e,t,n){return this.default(e,t,n)}demandCommand(e=1,t,n,s){return v("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,t,n,s],arguments.length),typeof t!="number"&&(n=t,t=1/0),this.global("_",!1),l(this,P,"f").demandedCommands._={min:e,max:t,minMsg:n,maxMsg:s},this}demand(e,t,n){return Array.isArray(t)?(t.forEach(s=>{me(n,!0,l(this,D,"f")),this.demandOption(s,n)}),t=1/0):typeof t!="number"&&(n=t,t=1/0),typeof e=="number"?(me(n,!0,l(this,D,"f")),this.demandCommand(e,t,n,n)):Array.isArray(e)?e.forEach(s=>{me(n,!0,l(this,D,"f")),this.demandOption(s,n)}):typeof n=="string"?this.demandOption(e,n):(n===!0||typeof n>"u")&&this.demandOption(e),this}demandOption(e,t){return v("<object|string|array> [string]",[e,t],arguments.length),this[xt](this.demandOption.bind(this),"demandedOptions",e,t),this}deprecateOption(e,t){return v("<string> [string|boolean]",[e,t],arguments.length),l(this,P,"f").deprecatedOptions[e]=t,this}describe(e,t){return v("<object|string|array> [string]",[e,t],arguments.length),this[zn](e,!0),l(this,L,"f").describe(e,t),this}detectLocale(e){return v("<boolean>",[e],arguments.length),A(this,et,e,"f"),this}env(e){return v("[string|boolean]",[e],arguments.length),e===!1?delete l(this,P,"f").envPrefix:l(this,P,"f").envPrefix=e||"",this}epilogue(e){return v("<string>",[e],arguments.length),l(this,L,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,t){return v("<string|array> [string]",[e,t],arguments.length),Array.isArray(e)?e.forEach(n=>this.example(...n)):l(this,L,"f").example(e,t),this}exit(e,t){A(this,be,!0,"f"),A(this,ze,t,"f"),l(this,Ee,"f")&&l(this,D,"f").process.exit(e)}exitProcess(e=!0){return v("[boolean]",[e],arguments.length),A(this,Ee,e,"f"),this}fail(e){if(v("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new K("Invalid first argument. Expected function or boolean 'false'");return l(this,L,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,t){return v("<array> [function]",[e,t],arguments.length),t?l(this,Ce,"f").getCompletion(e,t):new Promise((n,s)=>{l(this,Ce,"f").getCompletion(e,(i,r)=>{i?s(i):n(r)})})}getDemandedOptions(){return v([],0),l(this,P,"f").demandedOptions}getDemandedCommands(){return v([],0),l(this,P,"f").demandedCommands}getDeprecatedOptions(){return v([],0),l(this,P,"f").deprecatedOptions}getDetectLocale(){return l(this,et,"f")}getExitProcess(){return l(this,Ee,"f")}getGroups(){return Object.assign({},l(this,Ie,"f"),l(this,nt,"f"))}getHelp(){if(A(this,be,!0,"f"),!l(this,L,"f").hasCachedHelpMessage()){if(!this.parsed){let t=this[Pt](l(this,Ve,"f"),void 0,void 0,0,!0);if(J(t))return t.then(()=>l(this,L,"f").help())}let e=l(this,ie,"f").runDefaultBuilderOn(this);if(J(e))return e.then(()=>l(this,L,"f").help())}return Promise.resolve(l(this,L,"f").help())}getOptions(){return l(this,P,"f")}getStrict(){return l(this,ot,"f")}getStrictCommands(){return l(this,st,"f")}getStrictOptions(){return l(this,it,"f")}global(e,t){return v("<string|array> [boolean]",[e,t],arguments.length),e=[].concat(e),t!==!1?l(this,P,"f").local=l(this,P,"f").local.filter(n=>e.indexOf(n)===-1):e.forEach(n=>{l(this,P,"f").local.includes(n)||l(this,P,"f").local.push(n)}),this}group(e,t){v("<string|array> <string>",[e,t],arguments.length);let n=l(this,nt,"f")[t]||l(this,Ie,"f")[t];l(this,nt,"f")[t]&&delete l(this,nt,"f")[t];let s={};return l(this,Ie,"f")[t]=(n||[]).concat(e).filter(i=>s[i]?!1:s[i]=!0),this}hide(e){return v("<string>",[e],arguments.length),l(this,P,"f").hiddenOptions.push(e),this}implies(e,t){return v("<string|object> [number|string|array]",[e,t],arguments.length),l(this,oe,"f").implies(e,t),this}locale(e){return v("[string]",[e],arguments.length),e===void 0?(this[Un](),l(this,D,"f").y18n.getLocale()):(A(this,et,!1,"f"),l(this,D,"f").y18n.setLocale(e),this)}middleware(e,t,n){return l(this,Oe,"f").addMiddleware(e,!!t,n)}nargs(e,t){return v("<string|object|array> [number]",[e,t],arguments.length),this[xt](this.nargs.bind(this),"narg",e,t),this}normalize(e){return v("<array|string>",[e],arguments.length),this[Ye]("normalize",e),this}number(e){return v("<array|string>",[e],arguments.length),this[Ye]("number",e),this[lt](e),this}option(e,t){if(v("<string|object> [object]",[e,t],arguments.length),typeof e=="object")Object.keys(e).forEach(n=>{this.options(n,e[n])});else{typeof t!="object"&&(t={}),this[lt](e),l(this,Ne,"f")&&(e==="version"||t?.alias==="version")&&this[es](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),l(this,P,"f").key[e]=!0,t.alias&&this.alias(e,t.alias);let n=t.deprecate||t.deprecated;n&&this.deprecateOption(e,n);let s=t.demand||t.required||t.require;s&&this.demand(e,s),t.demandOption&&this.demandOption(e,typeof t.demandOption=="string"?t.demandOption:void 0),t.conflicts&&this.conflicts(e,t.conflicts),"default"in t&&this.default(e,t.default),t.implies!==void 0&&this.implies(e,t.implies),t.nargs!==void 0&&this.nargs(e,t.nargs),t.config&&this.config(e,t.configParser),t.normalize&&this.normalize(e),t.choices&&this.choices(e,t.choices),t.coerce&&this.coerce(e,t.coerce),t.group&&this.group(e,t.group),(t.boolean||t.type==="boolean")&&(this.boolean(e),t.alias&&this.boolean(t.alias)),(t.array||t.type==="array")&&(this.array(e),t.alias&&this.array(t.alias)),(t.number||t.type==="number")&&(this.number(e),t.alias&&this.number(t.alias)),(t.string||t.type==="string")&&(this.string(e),t.alias&&this.string(t.alias)),(t.count||t.type==="count")&&this.count(e),typeof t.global=="boolean"&&this.global(e,t.global),t.defaultDescription&&(l(this,P,"f").defaultDescription[e]=t.defaultDescription),t.skipValidation&&this.skipValidation(e);let i=t.describe||t.description||t.desc,r=l(this,L,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(r,e)||typeof i=="string")&&this.describe(e,i),t.hidden&&this.hide(e),t.requiresArg&&this.requiresArg(e)}return this}options(e,t){return this.option(e,t)}parse(e,t,n){v("[string|array] [function|boolean|object] [function]",[e,t,n],arguments.length),this[ts](),typeof e>"u"&&(e=l(this,Ve,"f")),typeof t=="object"&&(A(this,tt,t,"f"),t=n),typeof t=="function"&&(A(this,ye,t,"f"),t=!1),t||A(this,Ve,e,"f"),l(this,ye,"f")&&A(this,Ee,!1,"f");let s=this[Pt](e,!!t),i=this.parsed;return l(this,Ce,"f").setParsed(this.parsed),J(s)?s.then(r=>(l(this,ye,"f")&&l(this,ye,"f").call(this,l(this,ze,"f"),r,l(this,fe,"f")),r)).catch(r=>{throw l(this,ye,"f")&&l(this,ye,"f")(r,this.parsed.argv,l(this,fe,"f")),r}).finally(()=>{this[Vn](),this.parsed=i}):(l(this,ye,"f")&&l(this,ye,"f").call(this,l(this,ze,"f"),s,l(this,fe,"f")),this[Vn](),this.parsed=i,s)}parseAsync(e,t,n){let s=this.parse(e,t,n);return J(s)?s:Promise.resolve(s)}parseSync(e,t,n){let s=this.parse(e,t,n);if(J(s))throw new K(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return s}parserConfiguration(e){return v("<object>",[e],arguments.length),A(this,sn,e,"f"),this}pkgConf(e,t){v("<string> [string]",[e,t],arguments.length);let n=null,s=this[kn](t||l(this,Xe,"f"));return s[e]&&typeof s[e]=="object"&&(n=St(s[e],t||l(this,Xe,"f"),this[rt]()["deep-merge-config"]||!1,l(this,D,"f")),l(this,P,"f").configObjects=(l(this,P,"f").configObjects||[]).concat(n)),this}positional(e,t){v("<string> <object>",[e,t],arguments.length);let n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];t=We(t,(r,c)=>r==="type"&&!["string","number","boolean"].includes(c)?!1:n.includes(r));let s=l(this,jt,"f").fullCommands[l(this,jt,"f").fullCommands.length-1],i=s?l(this,ie,"f").cmdToParseOptions(s):{array:[],alias:{},default:{},demand:{}};return pt(i).forEach(r=>{let c=i[r];Array.isArray(c)?c.indexOf(e)!==-1&&(t[r]=!0):c[e]&&!(r in t)&&(t[r]=c[e])}),this.group(e,l(this,L,"f").getPositionalGroupName()),this.option(e,t)}recommendCommands(e=!0){return v("[boolean]",[e],arguments.length),A(this,rn,e,"f"),this}required(e,t,n){return this.demand(e,t,n)}require(e,t,n){return this.demand(e,t,n)}requiresArg(e){return v("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&l(this,P,"f").narg[e]?this:(this[xt](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,t){return v("[string] [string]",[e,t],arguments.length),e=e||this.$0,l(this,bt,"f").log(l(this,Ce,"f").generateCompletionScript(e,t||l(this,ge,"f")||"completion")),this}showHelp(e){if(v("[string|function]",[e],arguments.length),A(this,be,!0,"f"),!l(this,L,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[Pt](l(this,Ve,"f"),void 0,void 0,0,!0);if(J(n))return n.then(()=>{l(this,L,"f").showHelp(e)}),this}let t=l(this,ie,"f").runDefaultBuilderOn(this);if(J(t))return t.then(()=>{l(this,L,"f").showHelp(e)}),this}return l(this,L,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,t){return v("[boolean|string] [string]",[e,t],arguments.length),l(this,L,"f").showHelpOnFail(e,t),this}showVersion(e){return v("[string|function]",[e],arguments.length),l(this,L,"f").showVersion(e),this}skipValidation(e){return v("<array|string>",[e],arguments.length),this[Ye]("skipValidation",e),this}strict(e){return v("[boolean]",[e],arguments.length),A(this,ot,e!==!1,"f"),this}strictCommands(e){return v("[boolean]",[e],arguments.length),A(this,st,e!==!1,"f"),this}strictOptions(e){return v("[boolean]",[e],arguments.length),A(this,it,e!==!1,"f"),this}string(e){return v("<array|string>",[e],arguments.length),this[Ye]("string",e),this[lt](e),this}terminalWidth(){return v([],0),l(this,D,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return v("<object>",[e],arguments.length),A(this,et,!1,"f"),l(this,D,"f").y18n.updateLocale(e),this}usage(e,t,n,s){if(v("<string|null|undefined> [string|boolean] [function|object] [function]",[e,t,n,s],arguments.length),t!==void 0){if(me(e,null,l(this,D,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,t,n,s);throw new K(".usage() description must start with $0 if being used as alias for .command()")}else return l(this,L,"f").usage(e),this}usageConfiguration(e){return v("<object>",[e],arguments.length),A(this,an,e,"f"),this}version(e,t,n){let s="version";if(v("[boolean|string] [string] [string]",[e,t,n],arguments.length),l(this,Ne,"f")&&(this[Tn](l(this,Ne,"f")),l(this,L,"f").version(void 0),A(this,Ne,null,"f")),arguments.length===0)n=this[ss](),e=s;else if(arguments.length===1){if(e===!1)return this;n=e,e=s}else arguments.length===2&&(n=t,t=void 0);return A(this,Ne,typeof e=="string"?e:s,"f"),t=t||l(this,L,"f").deferY18nLookup("Show version number"),l(this,L,"f").version(n||void 0),this.boolean(l(this,Ne,"f")),this.describe(l(this,Ne,"f"),t),this}wrap(e){return v("<number|null|undefined>",[e],arguments.length),l(this,L,"f").wrap(e),this}[(ie=new WeakMap,Xe=new WeakMap,jt=new WeakMap,Ce=new WeakMap,ge=new WeakMap,Xt=new WeakMap,ze=new WeakMap,et=new WeakMap,en=new WeakMap,Ee=new WeakMap,tn=new WeakMap,Oe=new WeakMap,Ie=new WeakMap,be=new WeakMap,$e=new WeakMap,nn=new WeakMap,bt=new WeakMap,fe=new WeakMap,P=new WeakMap,on=new WeakMap,sn=new WeakMap,ye=new WeakMap,tt=new WeakMap,yt=new WeakMap,nt=new WeakMap,Ve=new WeakMap,rn=new WeakMap,D=new WeakMap,ot=new WeakMap,st=new WeakMap,it=new WeakMap,L=new WeakMap,an=new WeakMap,Ne=new WeakMap,oe=new WeakMap,Zo)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[Xo](){return{log:(...e)=>{this[ln]()||console.log(...e),A(this,be,!0,"f"),l(this,fe,"f").length&&A(this,fe,l(this,fe,"f")+`
`,"f"),A(this,fe,l(this,fe,"f")+e.join(" "),"f")},error:(...e)=>{this[ln]()||console.error(...e),A(this,be,!0,"f"),l(this,fe,"f").length&&A(this,fe,l(this,fe,"f")+`
`,"f"),A(this,fe,l(this,fe,"f")+e.join(" "),"f")}}}[Tn](e){pt(l(this,P,"f")).forEach(t=>{if((s=>s==="configObjects")(t))return;let n=l(this,P,"f")[t];Array.isArray(n)?n.includes(e)&&n.splice(n.indexOf(e),1):typeof n=="object"&&delete n[e]}),delete l(this,L,"f").getDescriptions()[e]}[es](e,t,n){l(this,en,"f")[n]||(l(this,D,"f").process.emitWarning(e,t),l(this,en,"f")[n]=!0)}[ts](){l(this,tn,"f").push({options:l(this,P,"f"),configObjects:l(this,P,"f").configObjects.slice(0),exitProcess:l(this,Ee,"f"),groups:l(this,Ie,"f"),strict:l(this,ot,"f"),strictCommands:l(this,st,"f"),strictOptions:l(this,it,"f"),completionCommand:l(this,ge,"f"),output:l(this,fe,"f"),exitError:l(this,ze,"f"),hasOutput:l(this,be,"f"),parsed:this.parsed,parseFn:l(this,ye,"f"),parseContext:l(this,tt,"f")}),l(this,L,"f").freeze(),l(this,oe,"f").freeze(),l(this,ie,"f").freeze(),l(this,Oe,"f").freeze()}[ns](){let e="",t;return/\b(node|iojs|electron)(\.exe)?$/.test(l(this,D,"f").process.argv()[0])?t=l(this,D,"f").process.argv().slice(1,2):t=l(this,D,"f").process.argv().slice(0,1),e=t.map(n=>{let s=this[ps](l(this,Xe,"f"),n);return n.match(/^(\/|([a-zA-Z]:)?\\)/)&&s.length<n.length?s:n}).join(" ").trim(),l(this,D,"f").getEnv("_")&&l(this,D,"f").getProcessArgvBin()===l(this,D,"f").getEnv("_")&&(e=l(this,D,"f").getEnv("_").replace(`${l(this,D,"f").path.dirname(l(this,D,"f").process.execPath())}/`,"")),e}[rt](){return l(this,sn,"f")}[os](){return l(this,an,"f")}[Un](){if(!l(this,et,"f"))return;let e=l(this,D,"f").getEnv("LC_ALL")||l(this,D,"f").getEnv("LC_MESSAGES")||l(this,D,"f").getEnv("LANG")||l(this,D,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[ss](){return this[kn]().version||"unknown"}[is](e){let t=e["--"]?e["--"]:e._;for(let n=0,s;(s=t[n])!==void 0;n++)l(this,D,"f").Parser.looksLikeNumber(s)&&Number.isSafeInteger(Math.floor(parseFloat(`${s}`)))&&(t[n]=Number(s));return e}[kn](e){let t=e||"*";if(l(this,yt,"f")[t])return l(this,yt,"f")[t];let n={};try{let s=e||l(this,D,"f").mainFilename;!e&&l(this,D,"f").path.extname(s)&&(s=l(this,D,"f").path.dirname(s));let i=l(this,D,"f").findUp(s,(r,c)=>{if(c.includes("package.json"))return"package.json"});me(i,void 0,l(this,D,"f")),n=JSON.parse(l(this,D,"f").readFileSync(i,"utf8"))}catch{}return l(this,yt,"f")[t]=n||{},l(this,yt,"f")[t]}[Ye](e,t){t=[].concat(t),t.forEach(n=>{n=this[Bn](n),l(this,P,"f")[e].push(n)})}[xt](e,t,n,s){this[Wn](e,t,n,s,(i,r,c)=>{l(this,P,"f")[i][r]=c})}[Gn](e,t,n,s){this[Wn](e,t,n,s,(i,r,c)=>{l(this,P,"f")[i][r]=(l(this,P,"f")[i][r]||[]).concat(c)})}[Wn](e,t,n,s,i){if(Array.isArray(n))n.forEach(r=>{e(r,s)});else if((r=>typeof r=="object")(n))for(let r of pt(n))e(r,n[r]);else i(t,this[Bn](n),s)}[Bn](e){return e==="__proto__"?"___proto___":e}[zn](e,t){return this[xt](this[zn].bind(this),"key",e,t),this}[Vn](){var e,t,n,s,i,r,c,g,x,p,m,b;let w=l(this,tn,"f").pop();me(w,void 0,l(this,D,"f"));let _;e=this,t=this,n=this,s=this,i=this,r=this,c=this,g=this,x=this,p=this,m=this,b=this,{options:{set value(E){A(e,P,E,"f")}}.value,configObjects:_,exitProcess:{set value(E){A(t,Ee,E,"f")}}.value,groups:{set value(E){A(n,Ie,E,"f")}}.value,output:{set value(E){A(s,fe,E,"f")}}.value,exitError:{set value(E){A(i,ze,E,"f")}}.value,hasOutput:{set value(E){A(r,be,E,"f")}}.value,parsed:this.parsed,strict:{set value(E){A(c,ot,E,"f")}}.value,strictCommands:{set value(E){A(g,st,E,"f")}}.value,strictOptions:{set value(E){A(x,it,E,"f")}}.value,completionCommand:{set value(E){A(p,ge,E,"f")}}.value,parseFn:{set value(E){A(m,ye,E,"f")}}.value,parseContext:{set value(E){A(b,tt,E,"f")}}.value}=w,l(this,P,"f").configObjects=_,l(this,L,"f").unfreeze(),l(this,oe,"f").unfreeze(),l(this,ie,"f").unfreeze(),l(this,Oe,"f").unfreeze()}[rs](e,t){return Ze(t,n=>(e(n),n))}getInternalMethods(){return{getCommandInstance:this[as].bind(this),getContext:this[ls].bind(this),getHasOutput:this[cs].bind(this),getLoggerInstance:this[fs].bind(this),getParseContext:this[ds].bind(this),getParserConfiguration:this[rt].bind(this),getUsageConfiguration:this[os].bind(this),getUsageInstance:this[us].bind(this),getValidationInstance:this[ms].bind(this),hasParseCallback:this[ln].bind(this),isGlobalContext:this[hs].bind(this),postProcess:this[at].bind(this),reset:this[Yn].bind(this),runValidation:this[Hn].bind(this),runYargsParserAndExecuteCommands:this[Pt].bind(this),setHasOutput:this[gs].bind(this)}}[as](){return l(this,ie,"f")}[ls](){return l(this,jt,"f")}[cs](){return l(this,be,"f")}[fs](){return l(this,bt,"f")}[ds](){return l(this,tt,"f")||{}}[us](){return l(this,L,"f")}[ms](){return l(this,oe,"f")}[ln](){return!!l(this,ye,"f")}[hs](){return l(this,nn,"f")}[at](e,t,n,s){return n||J(e)||(t||(e=this[Zo](e)),(this[rt]()["parse-positional-numbers"]||this[rt]()["parse-positional-numbers"]===void 0)&&(e=this[is](e)),s&&(e=Qe(e,this,l(this,Oe,"f").getMiddleware(),!1))),e}[Yn](e={}){A(this,P,l(this,P,"f")||{},"f");let t={};t.local=l(this,P,"f").local||[],t.configObjects=l(this,P,"f").configObjects||[];let n={};t.local.forEach(r=>{n[r]=!0,(e[r]||[]).forEach(c=>{n[c]=!0})}),Object.assign(l(this,nt,"f"),Object.keys(l(this,Ie,"f")).reduce((r,c)=>{let g=l(this,Ie,"f")[c].filter(x=>!(x in n));return g.length>0&&(r[c]=g),r},{})),A(this,Ie,{},"f");let s=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],i=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return s.forEach(r=>{t[r]=(l(this,P,"f")[r]||[]).filter(c=>!n[c])}),i.forEach(r=>{t[r]=We(l(this,P,"f")[r],c=>!n[c])}),t.envPrefix=l(this,P,"f").envPrefix,A(this,P,t,"f"),A(this,L,l(this,L,"f")?l(this,L,"f").reset(n):zo(this,l(this,D,"f")),"f"),A(this,oe,l(this,oe,"f")?l(this,oe,"f").reset(n):Jo(this,l(this,L,"f"),l(this,D,"f")),"f"),A(this,ie,l(this,ie,"f")?l(this,ie,"f").reset():Go(l(this,L,"f"),l(this,oe,"f"),l(this,Oe,"f"),l(this,D,"f")),"f"),l(this,Ce,"f")||A(this,Ce,Ho(this,l(this,L,"f"),l(this,ie,"f"),l(this,D,"f")),"f"),l(this,Oe,"f").reset(),A(this,ge,null,"f"),A(this,fe,"","f"),A(this,ze,null,"f"),A(this,be,!1,"f"),this.parsed=!1,this}[ps](e,t){return l(this,D,"f").path.relative(e,t)}[Pt](e,t,n,s=0,i=!1){let r=!!n||i;e=e||l(this,Ve,"f"),l(this,P,"f").__=l(this,D,"f").y18n.__,l(this,P,"f").configuration=this[rt]();let c=!!l(this,P,"f").configuration["populate--"],g=Object.assign({},l(this,P,"f").configuration,{"populate--":!0}),x=l(this,D,"f").Parser.detailed(e,Object.assign({},l(this,P,"f"),{configuration:{"parse-positional-numbers":!1,...g}})),p=Object.assign(x.argv,l(this,tt,"f")),m,b=x.aliases,w=!1,_=!1;Object.keys(p).forEach(E=>{E===l(this,$e,"f")&&p[E]?w=!0:E===l(this,Ne,"f")&&p[E]&&(_=!0)}),p.$0=this.$0,this.parsed=x,s===0&&l(this,L,"f").clearCachedHelpMessage();try{if(this[Un](),t)return this[at](p,c,!!n,!1);l(this,$e,"f")&&[l(this,$e,"f")].concat(b[l(this,$e,"f")]||[]).filter(Y=>Y.length>1).includes(""+p._[p._.length-1])&&(p._.pop(),w=!0),A(this,nn,!1,"f");let E=l(this,ie,"f").getCommands(),h=l(this,Ce,"f").completionKey in p,U=w||h||i;if(p._.length){if(E.length){let k;for(let Y=s||0,W;p._[Y]!==void 0;Y++)if(W=String(p._[Y]),E.includes(W)&&W!==l(this,ge,"f")){let H=l(this,ie,"f").runCommand(W,this,x,Y+1,i,w||_||i);return this[at](H,c,!!n,!1)}else if(!k&&W!==l(this,ge,"f")){k=W;break}!l(this,ie,"f").hasDefaultCommand()&&l(this,rn,"f")&&k&&!U&&l(this,oe,"f").recommendCommands(k,E)}l(this,ge,"f")&&p._.includes(l(this,ge,"f"))&&!h&&(l(this,Ee,"f")&&Be(!0),this.showCompletionScript(),this.exit(0))}if(l(this,ie,"f").hasDefaultCommand()&&!U){let k=l(this,ie,"f").runCommand(null,this,x,0,i,w||_||i);return this[at](k,c,!!n,!1)}if(h){l(this,Ee,"f")&&Be(!0),e=[].concat(e);let k=e.slice(e.indexOf(`--${l(this,Ce,"f").completionKey}`)+1);return l(this,Ce,"f").getCompletion(k,(Y,W)=>{if(Y)throw new K(Y.message);(W||[]).forEach(H=>{l(this,bt,"f").log(H)}),this.exit(0)}),this[at](p,!c,!!n,!1)}if(l(this,be,"f")||(w?(l(this,Ee,"f")&&Be(!0),r=!0,this.showHelp("log"),this.exit(0)):_&&(l(this,Ee,"f")&&Be(!0),r=!0,l(this,L,"f").showVersion("log"),this.exit(0))),!r&&l(this,P,"f").skipValidation.length>0&&(r=Object.keys(p).some(k=>l(this,P,"f").skipValidation.indexOf(k)>=0&&p[k]===!0)),!r){if(x.error)throw new K(x.error.message);if(!h){let k=this[Hn](b,{},x.error);n||(m=Qe(p,this,l(this,Oe,"f").getMiddleware(),!0)),m=this[rs](k,m??p),J(m)&&!n&&(m=m.then(()=>Qe(p,this,l(this,Oe,"f").getMiddleware(),!1)))}}}catch(E){if(E instanceof K)l(this,L,"f").fail(E.message,E);else throw E}return this[at](m??p,c,!!n,!0)}[Hn](e,t,n,s){let i={...this.getDemandedOptions()};return r=>{if(n)throw new K(n.message);l(this,oe,"f").nonOptionCount(r),l(this,oe,"f").requiredArguments(r,i);let c=!1;l(this,st,"f")&&(c=l(this,oe,"f").unknownCommands(r)),l(this,ot,"f")&&!c?l(this,oe,"f").unknownArguments(r,e,t,!!s):l(this,it,"f")&&l(this,oe,"f").unknownArguments(r,e,{},!1,!1),l(this,oe,"f").limitedChoices(r),l(this,oe,"f").implications(r),l(this,oe,"f").conflicting(r)}}[gs](){A(this,be,!0,"f")}[lt](e){if(typeof e=="string")l(this,P,"f").key[e]=!0;else for(let t of e)l(this,P,"f").key[t]=!0}};function Wo(o){return!!o&&typeof o.getInternalMethods=="function"}var ar=bs(Pn),ys=ar;var vs=V(require("node:process"),1);var Ct=require("node:fs"),Es=require("node:os"),Os=require("node:path"),fn=V(require("node:process"),1);var Ft=class extends Error{constructor(t,n,s=1){super(t);this.code=n;this.exitCode=s;this.name="FreedomError",Error.captureStackTrace(this,this.constructor)}},cn=class extends Ft{constructor(e,t="FATAL_ERROR"){super(e,t,1),this.name="FatalError"}},he=class extends Ft{constructor(e){super(e,"CONFIGURATION_ERROR",78),this.name="ConfigurationError"}},F=class extends Ft{constructor(e,t="AUTOMATION_ERROR"){super(e,t,1),this.name="GameAutomationError"}};var xs=V(require("node:process"),1),It={game:{url:"https://ys.mihoyo.com/cloud/",region:"cn",language:"zh-CN",autoLogin:!1},automation:{headless:!1,slowMo:100,timeout:3e4,retryAttempts:3,enableScreenshots:!0,screenshotPath:"./screenshots"},cli:{theme:"auto",verbosity:"normal",interactive:!0,autoUpdate:!1,locale:"zh-CN"},extensions:{enabled:[],disabled:[],autoInstall:!1,updateCheck:!0},logging:{level:"info",maxSize:"10MB",maxFiles:5,enableConsole:!0},security:{enableTelemetry:!1,allowRemoteControl:!1,trustedDomains:["mihoyo.com","hoyoverse.com","ys.mihoyo.com"]}},ws={FREEDOM_GAME_URL:"game.url",FREEDOM_GAME_REGION:"game.region",FREEDOM_HEADLESS:"automation.headless",FREEDOM_TIMEOUT:"automation.timeout",FREEDOM_LOG_LEVEL:"logging.level",FREEDOM_THEME:"cli.theme",FREEDOM_VERBOSE:"cli.verbosity"},wt={global:["~/.freedom/config.json","~/.config/freedom/config.json"],local:["./freedom.config.json","./.freedom/config.json","./config/freedom.json"],system:["/etc/freedom/config.json","/usr/local/etc/freedom/config.json"]};xs.default.platform==="win32"&&(wt.global.unshift("%APPDATA%/Freedom/config.json","%LOCALAPPDATA%/Freedom/config.json"),wt.system.unshift("%PROGRAMDATA%/Freedom/config.json"));var Kn=class{errors=[];validate(e){return this.errors=[],e.game&&this.validateGame(e.game),e.automation&&this.validateAutomation(e.automation),e.cli&&this.validateCli(e.cli),e.logging&&this.validateLogging(e.logging),e.security&&this.validateSecurity(e.security),this.errors}validateGame(e){e.url&&!this.isValidUrl(e.url)&&this.addError("game.url","Invalid URL format",e.url),e.region&&!["cn","global"].includes(e.region)&&this.addError("game.region",'Region must be "cn" or "global"',e.region),e.language&&typeof e.language!="string"&&this.addError("game.language","Language must be a string",e.language)}validateAutomation(e){e.slowMo!==void 0&&(e.slowMo<0||e.slowMo>5e3)&&this.addError("automation.slowMo","slowMo must be between 0 and 5000ms",e.slowMo),e.timeout!==void 0&&(e.timeout<1e3||e.timeout>3e5)&&this.addError("automation.timeout","timeout must be between 1000ms and 300000ms",e.timeout),e.retryAttempts!==void 0&&(e.retryAttempts<0||e.retryAttempts>10)&&this.addError("automation.retryAttempts","retryAttempts must be between 0 and 10",e.retryAttempts)}validateCli(e){e.theme&&!["dark","light","auto"].includes(e.theme)&&this.addError("cli.theme",'theme must be "dark", "light", or "auto"',e.theme),e.verbosity&&!["quiet","normal","verbose","debug"].includes(e.verbosity)&&this.addError("cli.verbosity",'verbosity must be "quiet", "normal", "verbose", or "debug"',e.verbosity)}validateLogging(e){e.level&&!["error","warn","info","debug"].includes(e.level)&&this.addError("logging.level",'level must be "error", "warn", "info", or "debug"',e.level),e.maxSize&&!this.isValidSize(e.maxSize)&&this.addError("logging.maxSize",'maxSize must be a valid size string (e.g., "10MB")',e.maxSize),e.maxFiles!==void 0&&(e.maxFiles<1||e.maxFiles>100)&&this.addError("logging.maxFiles","maxFiles must be between 1 and 100",e.maxFiles)}validateSecurity(e){if(e.trustedDomains)for(let t of e.trustedDomains)this.isValidDomain(t)||this.addError("security.trustedDomains",`Invalid domain: ${t}`,t)}addError(e,t,n){this.errors.push({path:e,message:t,value:n})}isValidUrl(e){try{return new URL(e),!0}catch{return!1}}isValidSize(e){return/^\d+(?:\.\d+)?[KMGT]?B$/i.test(e)}isValidDomain(e){return/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?(\.[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i.test(e)}};function Cs(o){return new Kn().validate(o)}var Jn=class{constructor(e=fn.default.cwd()){this.cwd=e;this.loadConfiguration()}layers=[];mergedConfig={...It};getConfig(){return{...this.mergedConfig}}get(e){let t=e.split("."),n=this.mergedConfig;for(let s of t)if(n&&typeof n=="object"&&s in n)n=n[s];else return;return n}set(e,t){let n=e.split("."),s=this.mergedConfig;for(let r=0;r<n.length-1;r++){let c=n[r];(!(c in s)||typeof s[c]!="object")&&(s[c]={}),s=s[c]}let i=n[n.length-1];s[i]=t}getLayers(){return[...this.layers]}reload(){this.layers=[],this.mergedConfig={...It},this.loadConfiguration()}loadConfiguration(){this.addLayer("default",It),this.loadSystemConfig(),this.loadUserConfig(),this.loadWorkspaceConfig(),this.loadEnvironmentConfig(),this.mergeConfigurations(),this.validateFinalConfig()}loadSystemConfig(){for(let e of wt.system){let t=this.expandPath(e);if((0,Ct.existsSync)(t))try{let n=this.loadJsonFile(t);this.addLayer("system",n,t);break}catch(n){console.warn(`Failed to load system config from ${t}:`,n)}}}loadUserConfig(){for(let e of wt.global){let t=this.expandPath(e);if((0,Ct.existsSync)(t))try{let n=this.loadJsonFile(t);this.addLayer("user",n,t);break}catch(n){console.warn(`Failed to load user config from ${t}:`,n)}}}loadWorkspaceConfig(){for(let e of wt.local){let t=(0,Os.resolve)(this.cwd,e);if((0,Ct.existsSync)(t))try{let n=this.loadJsonFile(t);this.addLayer("workspace",n,t);break}catch(n){console.warn(`Failed to load workspace config from ${t}:`,n)}}}loadEnvironmentConfig(){let e={};for(let[t,n]of Object.entries(ws)){let s=fn.default.env[t];s!==void 0&&this.setNestedValue(e,n,this.parseEnvValue(s))}Object.keys(e).length>0&&this.addLayer("env",e)}mergeConfigurations(){this.mergedConfig={...It};for(let e of this.layers)this.mergedConfig=this.deepMerge(this.mergedConfig,e.config)}validateFinalConfig(){let e=Cs(this.mergedConfig);if(e.length>0){let t=e.map(n=>`${n.path}: ${n.message}`).join(", ");throw new he(`Configuration validation failed: ${t}`)}}addLayer(e,t,n){this.layers.push({source:e,config:t,filePath:n})}loadJsonFile(e){try{let t=(0,Ct.readFileSync)(e,"utf-8");return JSON.parse(t)}catch(t){throw new he(`Failed to parse JSON config file ${e}: ${t}`)}}expandPath(e){return e.replace(/^~/,(0,Es.homedir)()).replace(/%([^%]+)%/g,(t,n)=>fn.default.env[n]||"")}setNestedValue(e,t,n){let s=t.split("."),i=e;for(let r=0;r<s.length-1;r++){let c=s[r];(!(c in i)||typeof i[c]!="object")&&(i[c]={}),i=i[c]}i[s[s.length-1]]=n}parseEnvValue(e){if(e.toLowerCase()==="true")return!0;if(e.toLowerCase()==="false")return!1;let t=Number(e);return!Number.isNaN(t)&&Number.isFinite(t)?t:e}deepMerge(e,t){let n={...e};for(let s in t){let i=t[s],r=n[s];this.isObject(i)&&this.isObject(r)?n[s]=this.deepMerge(r,i):i!==void 0&&(n[s]=i)}return n}isObject(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}},$s=new Jn;function ct(o){return $s.get(o)}function dn(){return $s.getConfig()}var _s={command:"get <key>",describe:"Get a configuration value",builder:o=>o.positional("key",{describe:"Configuration key to retrieve (e.g., game.url, automation.headless)",type:"string",demandOption:!0}).option("format",{alias:"f",describe:"Output format",type:"string",choices:["value","json","yaml"],default:"value"}).option("source",{alias:"s",describe:"Show configuration source",type:"boolean",default:!1}),handler:async o=>{try{console.log(a.blue(`\u{1F50D} Getting configuration value for: ${a.cyan(o.key)}`));let e=ct(o.key);if(e===void 0)throw new he(`Configuration key "${o.key}" not found`);console.log(),o.format==="json"?console.log(JSON.stringify({[o.key]:e},null,2)):o.format==="yaml"?console.log(`${o.key}: ${JSON.stringify(e)}`):console.log(a.green(typeof e=="string"?e:JSON.stringify(e))),o.source&&console.log(a.gray(`
Source: user configuration`))}catch(e){throw e instanceof he&&(console.error(a.red("\u274C Configuration Error:"),e.message),console.log(a.cyan('\u{1F4A1} Use "freedom config list" to see available keys')),vs.default.exit(1)),e}}};var As=V(require("node:process"),1);var Ms={command:"list",describe:"List all configuration settings",builder:o=>o.option("filter",{alias:"f",describe:"Filter keys by pattern (supports glob patterns)",type:"string"}).option("format",{describe:"Output format",type:"string",choices:["table","json","yaml","plain"],default:"table"}).option("show-defaults",{describe:"Show default values",type:"boolean",default:!1}).option("show-sources",{describe:"Show configuration sources",type:"boolean",default:!1}),handler:async o=>{try{console.log(a.blue("\u{1F4CB} Configuration Settings:")),o.filter&&console.log(a.gray(`Filter: ${o.filter}`)),console.log(a.gray(`Format: ${o.format}`)),console.log();let e=dn();if(o.format==="json"){console.log(JSON.stringify(e,null,2));return}if(o.format==="yaml"){Object.entries(e).forEach(([n,s])=>{console.log(`${n}: ${JSON.stringify(s)}`)});return}let t=o.filter?Object.entries(e).filter(([n])=>n.toLowerCase().includes(o.filter.toLowerCase())):Object.entries(e);if(t.length===0){console.log(a.yellow("No configuration settings found"));return}t.forEach(([n,s])=>{let i=typeof s=="string"?s:JSON.stringify(s);o.format==="table"?console.log(`${a.cyan(n.padEnd(25))} ${a.white("\u2502")} ${a.green(i)}`):console.log(`${n}: ${i}`),o["show-sources"]&&console.log(a.gray("  Source: user configuration"))}),console.log(),console.log(a.gray(`Found ${t.length} configuration setting(s)`)),o["show-defaults"]&&console.log(a.cyan('\u{1F4A1} Use "freedom config get <key>" to see individual values'))}catch(e){console.error(a.red("\u274C Failed to list configuration:"),e instanceof Error?e.message:"Unknown error"),As.default.exit(1)}}};var Ss=V(require("node:process"),1);var js={command:"reset [key]",describe:"Reset configuration to defaults",builder:o=>o.positional("key",{describe:"Specific key to reset (if not provided, resets all)",type:"string"}).option("confirm",{alias:"y",describe:"Skip confirmation prompt",type:"boolean",default:!1}).option("backup",{alias:"b",describe:"Create backup before reset",type:"boolean",default:!0}).option("global",{alias:"g",describe:"Reset global configuration",type:"boolean",default:!1}),handler:async o=>{try{let e=!o.key,t=o.global?"global":"local";if(console.log(e?a.yellow(`\u{1F504} Resetting ALL ${t} configuration to defaults`):a.yellow(`\u{1F504} Resetting configuration key: ${a.cyan(o.key)}`)),console.log(a.gray(`Backup: ${o.backup?"Yes":"No"}`)),console.log(a.gray(`Skip confirmation: ${o.confirm?"Yes":"No"}`)),!o.confirm){let n=e?`Are you sure you want to reset ALL ${t} configuration to defaults?`:`Are you sure you want to reset "${o.key}" to its default value?`;console.log(),console.log(a.red("\u26A0\uFE0F  WARNING: This action cannot be undone!")),console.log(a.yellow(n)),console.log(a.yellow("\u26A0\uFE0F  Interactive confirmation not yet implemented")),console.log(a.cyan("\u{1F4A1} Use --confirm to skip this prompt"));return}o.backup&&(console.log(a.blue("\u{1F4BE} Creating configuration backup...")),console.log(a.green("\u2705 Backup created"))),console.log(),console.log(a.green("\u2705 Configuration reset completed")),console.log(a.yellow("\u26A0\uFE0F  Configuration reset not yet implemented")),e&&console.log(a.cyan('\u{1F4A1} Run "freedom config list" to see the default values'))}catch(e){throw e instanceof he&&(console.error(a.red("\u274C Configuration Error:"),e.message),Ss.default.exit(1)),e}}};var Ps=V(require("node:process"),1);var Fs={command:"set <key> <value>",describe:"Set a configuration value",builder:o=>o.positional("key",{describe:"Configuration key to set (e.g., game.url, automation.headless)",type:"string",demandOption:!0}).positional("value",{describe:"Value to set",type:"string",demandOption:!0}).option("type",{alias:"t",describe:"Value type",type:"string",choices:["string","number","boolean","json"],default:"string"}).option("global",{alias:"g",describe:"Set as global configuration",type:"boolean",default:!1}),handler:async o=>{try{console.log(a.green(`\u2699\uFE0F  Setting configuration: ${a.cyan(o.key)}`));let e=o.value,t=e;switch(o.type){case"number":if(t=Number(e),Number.isNaN(t))throw new he(`Invalid number value: ${e}`);break;case"boolean":if(e.toLowerCase()==="true")t=!0;else if(e.toLowerCase()==="false")t=!1;else throw new he(`Invalid boolean value: ${e}. Use 'true' or 'false'`);break;case"json":try{t=JSON.parse(e)}catch{throw new he(`Invalid JSON value: ${e}`)}break}console.log(a.gray(`Value: ${JSON.stringify(t)}`)),console.log(a.gray(`Type: ${o.type}`)),console.log(a.gray(`Scope: ${o.global?"Global":"Local"}`)),console.log(),console.log(a.green("\u2705 Configuration updated successfully")),console.log(a.yellow("\u26A0\uFE0F  Configuration persistence not yet implemented"))}catch(e){throw e instanceof he&&(console.error(a.red("\u274C Configuration Error:"),e.message),Ps.default.exit(1)),e}}};var Is={command:"config <command>",describe:"Manage configuration settings",builder:o=>o.command(_s).command(Fs).command(Ms).command(js).demandCommand(1,a.red("You need to specify a config command.")).help(),handler:()=>{}};var Ns=require("node:fs"),un=require("node:os"),Nt=require("node:path"),Ue=V(require("node:process"),1);var Rs={command:"doctor",describe:"Run system diagnostics and health checks",builder:o=>o.option("verbose",{alias:"v",describe:"Show detailed diagnostic information",type:"boolean",default:!1}).option("fix",{describe:"Attempt to fix detected issues",type:"boolean",default:!1}).option("output",{alias:"o",describe:"Output format",type:"string",choices:["pretty","json","markdown"],default:"pretty"}),handler:async o=>{try{console.log(a.green(`\u{1F50D} Running Freedom system diagnostics...
`));let e=[fr(),dr(),ur(),mr(),hr(),pr(),gr()],t=await Promise.all(e),n=t.filter(r=>r.status==="pass").length,s=t.filter(r=>r.status==="warn").length,i=t.filter(r=>r.status==="fail").length;t.forEach(r=>{let c=lr(r.status),g=cr(r.status);console.log(g(`${c} ${r.name}`)),(o.verbose||r.status!=="pass")&&console.log(a.gray(`   ${r.message}`)),r.details&&o.verbose&&console.log(a.gray(`   Details: ${r.details}`)),r.fix&&r.status!=="pass"&&console.log(a.cyan(`   Fix: ${r.fix}`)),console.log()}),console.log(a.blue("\u{1F4CA} Diagnostic Summary:")),console.log(a.green(`\u2705 Passed: ${n}`)),console.log(a.yellow(`\u26A0\uFE0F  Warnings: ${s}`)),console.log(a.red(`\u274C Errors: ${i}`)),console.log(),i>0?(console.log(a.red("\u274C Some critical issues were detected. Please address them before using Freedom.")),o.fix&&console.log(a.cyan("\u{1F4A1} Use --fix to attempt automatic repairs")),Ue.default.exit(1)):s>0?console.log(a.yellow("\u26A0\uFE0F  Some issues were detected, but Freedom should still work.")):console.log(a.green("\u2705 All checks passed! Freedom is ready to use."))}catch(e){console.error(a.red("\u274C Diagnostic check failed:"),e instanceof Error?e.message:"Unknown error"),Ue.default.exit(1)}}};function lr(o){switch(o){case"pass":return"\u2705";case"warn":return"\u26A0\uFE0F ";case"fail":return"\u274C";default:return"\u2753"}}function cr(o){switch(o){case"pass":return a.green;case"warn":return a.yellow;case"fail":return a.red;default:return a.gray}}async function fr(){let o=Ue.default.version,e=Number.parseInt(o.slice(1).split(".")[0]);return e>=20?{name:"Node.js Version",status:"pass",message:`Node.js ${o} (supported)`}:e>=18?{name:"Node.js Version",status:"warn",message:`Node.js ${o} (minimum supported, but upgrade recommended)`,fix:"Consider upgrading to Node.js 20 or later"}:{name:"Node.js Version",status:"fail",message:`Node.js ${o} (unsupported)`,fix:"Upgrade to Node.js 18 or later"}}async function dr(){let o=Ue.default.platform,e=Ue.default.arch,t=["win32","darwin","linux"],n=["x64","arm64"];return t.includes(o)&&n.includes(e)?{name:"Platform Support",status:"pass",message:`${o}/${e} (fully supported)`}:{name:"Platform Support",status:"warn",message:`${o}/${e} (limited support)`,details:"Some features may not work as expected"}}async function ur(){let o=Ue.default.memoryUsage(),e=Math.round(o.heapUsed/1024/1024),t=Math.round(o.heapTotal/1024/1024);return e<100?{name:"Memory Usage",status:"pass",message:`${e}MB used / ${t}MB allocated`}:e<500?{name:"Memory Usage",status:"warn",message:`${e}MB used / ${t}MB allocated (high usage)`}:{name:"Memory Usage",status:"fail",message:`${e}MB used / ${t}MB allocated (very high usage)`,fix:"Consider restarting the application"}}async function mr(){return{name:"Disk Space",status:"pass",message:"Available (check not implemented)",details:`Home directory: ${(0,un.homedir)()}`}}async function hr(){let e=[(0,Nt.join)((0,un.homedir)(),".freedom","config.json"),(0,Nt.join)(Ue.default.cwd(),".freedom.json"),(0,Nt.join)(Ue.default.cwd(),"freedom.config.json")].filter(Ns.existsSync);return e.length>0?{name:"Configuration Files",status:"pass",message:`Found ${e.length} config file(s)`,details:e.join(", ")}:{name:"Configuration Files",status:"warn",message:"No configuration files found (using defaults)",fix:'Run "freedom config set game.url <your-game-url>" to create initial config'}}async function pr(){return{name:"Dependencies",status:"warn",message:"Dependency check not yet implemented",fix:'Run "pnpm install" to ensure all dependencies are installed'}}async function gr(){let o=(0,un.homedir)(),e=(0,Nt.join)(o,".freedom");try{return{name:"File Permissions",status:"pass",message:"File system permissions OK",details:`Freedom directory: ${e}`}}catch{return{name:"File Permissions",status:"fail",message:"Cannot write to Freedom directory",fix:`Ensure write permissions for ${e}`}}}var Ds=V(require("node:process"),1);var Ls={command:"log",describe:"View application logs",builder:o=>o.option("tail",{alias:"f",describe:"Follow log output (like tail -f)",type:"boolean",default:!1}).option("lines",{alias:"n",describe:"Number of lines to show",type:"number",default:50}).option("level",{alias:"l",describe:"Filter by log level",type:"string",choices:["error","warn","info","debug","trace"]}).option("format",{describe:"Log output format",type:"string",choices:["pretty","json","raw"],default:"pretty"}).option("since",{describe:'Show logs since timestamp or relative time (e.g., "1h", "2024-01-01")',type:"string"}),handler:async o=>{try{console.log(a.blue("\u{1F4CB} Application Logs:")),console.log(a.gray(`Format: ${o.format}`)),console.log(a.gray(`Lines: ${o.lines}`)),console.log(a.gray(`Follow: ${o.tail?"Yes":"No"}`)),o.level&&console.log(a.gray(`Level filter: ${o.level}`)),o.since&&console.log(a.gray(`Since: ${o.since}`)),console.log(),console.log(a.yellow("\u26A0\uFE0F  Log viewing not yet implemented")),console.log(a.cyan("\u{1F4A1} Logs will be available at: ~/.freedom/logs/"))}catch(e){console.error(a.red("\u274C Failed to retrieve logs:"),e instanceof Error?e.message:"Unknown error"),Ds.default.exit(1)}}};var Pe=V(require("node:process"),1);var Ts={command:"monitor",describe:"Monitor system performance and resource usage",builder:o=>o.option("watch",{alias:"w",describe:"Continuously monitor (like watch command)",type:"boolean",default:!1}).option("interval",{alias:"i",describe:"Monitoring interval in seconds",type:"number",default:5}).option("duration",{alias:"d",describe:"Duration to monitor in seconds (0 = unlimited)",type:"number",default:0}).option("output",{alias:"o",describe:"Output file for metrics data",type:"string"}),handler:async o=>{try{console.log(a.blue("\u{1F4CA} Freedom Performance Monitor")),console.log(a.gray(`Interval: ${o.interval}s`)),console.log(a.gray(`Watch mode: ${o.watch?"Yes":"No"}`)),o.duration>0&&console.log(a.gray(`Duration: ${o.duration}s`)),o.output&&console.log(a.gray(`Output file: ${o.output}`)),console.log(a.gray(`Press Ctrl+C to stop monitoring
`));let e=0,t=o.duration,n=o.interval,s=t>0?Math.ceil(t/n):0,i=()=>{if(console.clear(),console.log(a.blue("\u{1F4CA} Freedom Performance Monitor")),console.log(a.gray(`${new Date().toLocaleString()}
`)),br(),console.log(),yr(),console.log(),xr(),e++,s>0&&e>=s){console.log(a.green(`
\u2705 Monitoring completed`));return}o.watch&&setTimeout(i,n*1e3)};i(),o.watch||console.log(a.cyan(`
\u{1F4A1} Use --watch to continuously monitor`))}catch(e){console.error(a.red("\u274C Monitoring failed:"),e instanceof Error?e.message:"Unknown error"),Pe.default.exit(1)}}};function br(){console.log(a.cyan("\u{1F4BB} System Metrics:"));let o=Pe.default.cpuUsage();console.log(`CPU Usage: ${wr(o)}`);let e=Pe.default.memoryUsage();console.log(`Memory: ${Cr(e)}`),console.log(`Platform: ${Pe.default.platform} (${Pe.default.arch})`),console.log(`Node.js: ${Pe.default.version}`),console.log(`Uptime: ${Er(Pe.default.uptime())}`)}function yr(){console.log(a.cyan("\u{1F527} Process Metrics:")),console.log(`PID: ${Pe.default.pid}`),console.log(`Working Directory: ${Pe.default.cwd()}`),console.log(`Arguments: ${Pe.default.argv.slice(2).join(" ")}`),console.log(a.yellow("Extended process metrics not yet implemented"))}function xr(){console.log(a.cyan("\u{1F3AE} Game Session Metrics:")),console.log(a.yellow("Game session monitoring not yet implemented")),console.log(a.gray("Will show: Active sessions, Browser instances, Script executions, Error rates"))}function wr(o){let e=o.user/1e3,t=o.system/1e3;return`${(e+t).toFixed(2)}ms (user: ${e.toFixed(2)}ms, system: ${t.toFixed(2)}ms)`}function Cr(o){let e=t=>`${(t/1024/1024).toFixed(1)}MB`;return`${e(o.heapUsed)} used / ${e(o.heapTotal)} allocated (RSS: ${e(o.rss)})`}function Er(o){let e=Math.floor(o/3600),t=Math.floor(o%3600/60),n=Math.floor(o%60);return e>0?`${e}h ${t}m ${n}s`:t>0?`${t}m ${n}s`:`${n}s`}var Us={command:"debug <command>",describe:"Debug and diagnostic tools",builder:o=>o.command(Ls).command(Rs).command(Ts).demandCommand(1,a.red("You need to specify a debug command.")).help(),handler:()=>{}};var ks=V(require("node:process"),1);var Gs={command:"disable <name>",describe:"Disable an enabled extension",builder:o=>o.positional("name",{describe:"Name of extension to disable",type:"string",demandOption:!0}).option("restart",{alias:"r",describe:"Restart Freedom after disabling (if running)",type:"boolean",default:!1}).option("keep-config",{describe:"Keep extension configuration",type:"boolean",default:!0}),handler:async o=>{try{console.log(a.yellow(`\u274C Disabling extension: ${a.cyan(o.name)}`)),console.log(a.gray(`Keep configuration: ${o["keep-config"]?"Yes":"No"}`)),console.log(a.gray(`Auto-restart: ${o.restart?"Yes":"No"}`)),console.log(),console.log(a.green("\u2705 Extension disabled successfully")),console.log(a.yellow("\u26A0\uFE0F  Extension disabling not yet implemented")),o["keep-config"]||console.log(a.gray("Extension configuration removed")),o.restart?(console.log(a.blue("\u{1F504} Restarting Freedom...")),console.log(a.yellow("\u26A0\uFE0F  Auto-restart not yet implemented"))):console.log(a.cyan("\u{1F4A1} Restart Freedom to fully deactivate the extension")),console.log(a.gray(`
Use "freedom extension list" to verify the extension is disabled`))}catch(e){throw e instanceof F&&(console.error(a.red("\u274C Failed to disable extension:"),e.message),ks.default.exit(1)),e}}};var Ws=V(require("node:process"),1);var Bs={command:"enable <name>",describe:"Enable an installed extension",builder:o=>o.positional("name",{describe:"Name of extension to enable",type:"string",demandOption:!0}).option("restart",{alias:"r",describe:"Restart Freedom after enabling (if running)",type:"boolean",default:!1}),handler:async o=>{try{console.log(a.green(`\u2705 Enabling extension: ${a.cyan(o.name)}`)),console.log(a.gray(`Auto-restart: ${o.restart?"Yes":"No"}`)),console.log(),console.log(a.green("\u2705 Extension enabled successfully")),console.log(a.yellow("\u26A0\uFE0F  Extension enabling not yet implemented")),o.restart?(console.log(a.blue("\u{1F504} Restarting Freedom...")),console.log(a.yellow("\u26A0\uFE0F  Auto-restart not yet implemented"))):console.log(a.cyan("\u{1F4A1} Restart Freedom to fully activate the extension")),console.log(a.gray(`
Use "freedom extension list" to verify the extension is enabled`))}catch(e){throw e instanceof F&&(console.error(a.red("\u274C Failed to enable extension:"),e.message),Ws.default.exit(1)),e}}};var Vs=V(require("node:process"),1);var mn=require("node:fs/promises"),Or=V(require("node:path"),1),$r=V(require("node:process"),1);var Rt=require("node:fs/promises"),Fe=V(require("node:path"),1),Qn=V(require("node:process"),1),zs=require("node:url");var Dt=class{constructor(e){this.context=e;this.extensionPaths=[Fe.default.join(Qn.default.cwd(),"extensions"),Fe.default.join(Qn.default.cwd(),"node_modules"),Fe.default.join(require.resolve("@freedom/cli"),"../extensions")]}extensions=new Map;extensionPaths=[];addExtensionPath(e){this.extensionPaths.includes(e)||this.extensionPaths.push(e)}async discoverAndLoadExtensions(){this.context.logger.info("\u{1F50D} Discovering extensions...");for(let e of this.extensionPaths)try{await this.loadExtensionsFromPath(e)}catch(t){this.context.logger.warn(`Failed to load extensions from ${e}: ${t instanceof Error?t.message:"Unknown error"}`)}this.context.logger.info(`\u{1F4E6} Discovered ${this.extensions.size} extension(s)`)}async loadExtensionsFromPath(e){try{(await(0,Rt.stat)(e)).isDirectory()}catch{}}async loadExtensionFromManifest(e){try{let t=await(0,Rt.readFile)(e,"utf-8"),n=JSON.parse(t);if(!n.name)throw new F('Extension manifest missing required "name" field');if(!n.main)throw new F('Extension manifest missing required "main" field');let s=Fe.default.dirname(e),i=Fe.default.resolve(s,n.main);return await this.loadExtensionFromFile(i,n)}catch(t){let n=t instanceof Error?t:new Error("Unknown error"),s={manifest:{name:"unknown",version:"0.0.0",main:""},module:null,path:e,loaded:!1,enabled:!1,error:n};return this.context.logger.error(`Failed to load extension from ${e}: ${n.message}`),s}}async loadExtensionFromFile(e,t){try{let s=await import((0,zs.pathToFileURL)(e).href),i;if(t)i=t;else{let c=Fe.default.join(Fe.default.dirname(e),"package.json");try{let g=await(0,Rt.readFile)(c,"utf-8");i=JSON.parse(g)}catch{i={name:Fe.default.basename(e,Fe.default.extname(e)),version:"1.0.0",main:Fe.default.basename(e)}}}let r={manifest:i,module:s,path:e,loaded:!0,enabled:!1,error:void 0};return this.extensions.set(i.name,r),this.context.logger.info(`\u{1F4E6} Loaded extension: ${a.cyan(i.name)} v${i.version}`),r}catch(n){let s=n instanceof Error?n:new Error("Unknown error"),r={manifest:t||{name:"unknown",version:"0.0.0",main:""},module:null,path:e,loaded:!1,enabled:!1,error:s};return this.extensions.set(r.manifest.name,r),this.context.logger.error(`Failed to load extension ${e}: ${s.message}`),r}}async enableExtension(e){let t=this.extensions.get(e);if(!t)throw new F(`Extension "${e}" not found`);if(!t.loaded)throw new F(`Extension "${e}" failed to load: ${t.error?.message||"Unknown error"}`);if(t.enabled){this.context.logger.warn(`Extension "${e}" is already enabled`);return}try{t.module.onEnable&&await t.module.onEnable(this.context),t.enabled=!0,this.context.logger.info(`\u2705 Enabled extension: ${a.green(e)}`)}catch(n){let s=n instanceof Error?n:new Error("Unknown error");throw this.context.logger.error(`Failed to enable extension "${e}": ${s.message}`),new F(`Failed to enable extension "${e}": ${s.message}`)}}async disableExtension(e){let t=this.extensions.get(e);if(!t)throw new F(`Extension "${e}" not found`);if(!t.enabled){this.context.logger.warn(`Extension "${e}" is already disabled`);return}try{t.module.onDisable&&await t.module.onDisable(this.context),t.enabled=!1,this.context.logger.info(`\u274C Disabled extension: ${a.yellow(e)}`)}catch(n){let s=n instanceof Error?n:new Error("Unknown error");throw this.context.logger.error(`Failed to disable extension "${e}": ${s.message}`),new F(`Failed to disable extension "${e}": ${s.message}`)}}async unloadExtension(e){let t=this.extensions.get(e);if(!t)throw new F(`Extension "${e}" not found`);t.enabled&&await this.disableExtension(e);try{t.module.onUnload&&await t.module.onUnload(this.context),this.extensions.delete(e),this.context.logger.info(`\u{1F4E4} Unloaded extension: ${a.red(e)}`)}catch(n){let s=n instanceof Error?n:new Error("Unknown error");throw this.context.logger.error(`Failed to unload extension "${e}": ${s.message}`),new F(`Failed to unload extension "${e}": ${s.message}`)}}getAllExtensions(){return Array.from(this.extensions.values())}getExtension(e){return this.extensions.get(e)}getEnabledExtensions(){return this.getAllExtensions().filter(e=>e.enabled)}hasExtension(e){return this.extensions.has(e)}isExtensionEnabled(e){let t=this.extensions.get(e);return t?t.enabled:!1}getExtensionStats(){let e=this.getAllExtensions();return{total:e.length,loaded:e.filter(t=>t.loaded).length,enabled:e.filter(t=>t.enabled).length,failed:e.filter(t=>t.error).length}}};var re=require("node:fs/promises"),de=V(require("node:path"),1),Zn=V(require("node:process"),1);var Lt=class{loader;extensionsDir;backupDir;constructor(e){this.loader=new Dt(e),this.extensionsDir=de.default.join(Zn.default.cwd(),"extensions"),this.backupDir=de.default.join(Zn.default.cwd(),".freedom","extension-backups")}async initialize(){await this.ensureDirectories(),await this.loader.discoverAndLoadExtensions()}async ensureDirectories(){await(0,re.mkdir)(this.extensionsDir,{recursive:!0}),await(0,re.mkdir)(this.backupDir,{recursive:!0})}async installExtension(e,t={source:"registry"}){console.log(a.blue(`\u{1F4E6} Installing extension: ${a.cyan(e)}`)),console.log(a.gray(`Source: ${t.source}`)),t.version&&console.log(a.gray(`Version: ${t.version}`));try{if(this.loader.hasExtension(e)&&!t.force)throw new F(`Extension "${e}" is already installed. Use --force to reinstall.`);let n;switch(t.source){case"registry":n=await this.installFromRegistry(e,t.version);break;case"git":n=await this.installFromGit(e);break;case"local":n=await this.installFromLocal(e);break;case"url":n=await this.installFromUrl(e);break;default:throw new F(`Unsupported installation source: ${t.source}`)}let s=de.default.join(n,"package.json"),i=await this.loader.loadExtensionFromManifest(s);return console.log(a.green(`\u2705 Successfully installed extension: ${a.cyan(e)}`)),i}catch(n){let s=n instanceof Error?n:new Error("Unknown error");throw console.error(a.red(`\u274C Failed to install extension "${e}": ${s.message}`)),s}}async installFromRegistry(e,t){console.log(a.yellow("\u26A0\uFE0F  Registry installation not yet implemented"));let n=de.default.join(this.extensionsDir,e);await(0,re.mkdir)(n,{recursive:!0});let s={name:e,version:t||"1.0.0",description:`Extension ${e} installed from registry`,main:"index.js",author:"Extension Author",license:"MIT"};await(0,re.writeFile)(de.default.join(n,"package.json"),JSON.stringify(s,null,2));let i=`
// Extension: ${e}
export function onEnable(context) {
  context.logger.info('Extension ${e} enabled');
}

export function onDisable(context) {
  context.logger.info('Extension ${e} disabled');
}
`;return await(0,re.writeFile)(de.default.join(n,"index.js"),i),n}async installFromGit(e){throw console.log(a.yellow("\u26A0\uFE0F  Git installation not yet implemented")),new F("Git installation not yet implemented")}async installFromLocal(e){let t=de.default.resolve(e);try{if(!(await(0,re.stat)(t)).isDirectory())throw new F("Local path must be a directory");let s=de.default.join(t,"package.json"),i=await(0,re.readFile)(s,"utf-8"),r=JSON.parse(i);if(!r.name)throw new F('Extension manifest missing required "name" field');let c=de.default.join(this.extensionsDir,r.name);return await this.copyDirectory(t,c),console.log(a.green(`\u{1F4C1} Copied extension from ${t} to ${c}`)),c}catch(n){let s=n instanceof Error?n:new Error("Unknown error");throw new F(`Failed to install from local path: ${s.message}`)}}async installFromUrl(e){throw console.log(a.yellow("\u26A0\uFE0F  URL installation not yet implemented")),new F("URL installation not yet implemented")}async copyDirectory(e,t){await(0,re.mkdir)(t,{recursive:!0});let n=await(0,re.readdir)(e,{withFileTypes:!0});for(let s of n){let i=de.default.join(e,s.name),r=de.default.join(t,s.name);if(s.isDirectory())await this.copyDirectory(i,r);else{let c=await(0,re.readFile)(i,"utf-8");await(0,re.writeFile)(r,c)}}}async uninstallExtension(e,t={}){console.log(a.red(`\u{1F4E4} Uninstalling extension: ${a.cyan(e)}`));let n=this.loader.getExtension(e);if(!n)throw new F(`Extension "${e}" not found`);try{n.enabled&&await this.loader.disableExtension(e),await this.loader.unloadExtension(e);let s=de.default.join(this.extensionsDir,e);try{await(0,re.rm)(s,{recursive:!0,force:!0}),console.log(a.green(`\u{1F5D1}\uFE0F  Removed extension directory: ${s}`))}catch(i){console.log(a.yellow(`\u26A0\uFE0F  Could not remove directory ${s}: ${i instanceof Error?i.message:"Unknown error"}`))}console.log(a.green(`\u2705 Successfully uninstalled extension: ${a.cyan(e)}`))}catch(s){let i=s instanceof Error?s:new Error("Unknown error");throw console.error(a.red(`\u274C Failed to uninstall extension "${e}": ${i.message}`)),i}}async enableExtension(e){await this.loader.enableExtension(e)}async disableExtension(e){await this.loader.disableExtension(e)}listExtensions(){return this.loader.getAllExtensions()}findExtension(e){return this.loader.getExtension(e)}async backup(e){let t=this.loader.getExtension(e);if(!t)throw new F(`Extension "${e}" not found`);try{let n=new Date,s=`${e}_${n.toISOString().replace(/[:.]/g,"-")}`,i=de.default.join(this.backupDir,`${s}.json`),r=de.default.dirname(t.path),c=[],g=await(0,re.readdir)(r,{withFileTypes:!0});for(let p of g)if(p.isFile()){let m=de.default.join(r,p.name),b=await(0,re.readFile)(m,"utf-8");c.push({path:p.name,content:b})}let x={name:t.manifest.name,version:t.manifest.version,timestamp:n,manifest:t.manifest,files:c};return await(0,re.writeFile)(i,JSON.stringify(x,null,2)),console.log(a.green(`\u{1F4BE} Created backup: ${i}`)),x}catch(n){let s=n instanceof Error?n:new Error("Unknown error");throw new F(`Failed to create backup for extension "${e}": ${s.message}`)}}getStats(){return this.loader.getExtensionStats()}getLoader(){return this.loader}};var Ys={command:"install <source>",describe:"Install an extension from various sources",builder:o=>o.positional("source",{describe:"Extension source: name (registry), path (local), or git URL",type:"string",demandOption:!0}).option("force",{alias:"f",describe:"Force installation even if already exists",type:"boolean",default:!1}).option("version",{alias:"v",describe:"Specific version to install",type:"string"}).option("enable",{describe:"Enable extension after installation",type:"boolean",default:!0}).option("registry",{describe:"Extension registry URL",type:"string",default:"https://registry.freedom-extensions.com"}),handler:async o=>{try{console.log(a.green(`\u{1F4E5} Installing extension: ${a.cyan(o.source)}`)),o.version&&console.log(a.gray(`Version: ${o.version}`)),console.log(a.gray(`Force: ${o.force?"Yes":"No"}`)),console.log(a.gray(`Enable after install: ${o.enable?"Yes":"No"}`)),console.log();let e=vr(o.source);switch(console.log(a.blue(`Source type detected: ${e}`)),e){case"registry":console.log(a.gray(`Registry: ${o.registry}`));break;case"git":console.log(a.gray("Cloning from Git repository..."));break;case"local":console.log(a.gray("Installing from local path..."));break}let t={config:dn(),logger:{info:r=>console.log(a.blue("\u2139\uFE0F "),r),warn:r=>console.log(a.yellow("\u26A0\uFE0F "),r),error:r=>console.log(a.red("\u274C"),r)},api:{registerCommand:(r,c)=>{console.log(a.gray(`Registered command: ${r}`))},registerHook:(r,c)=>{console.log(a.gray(`Registered hook: ${r}`))}}},n=new Lt(t);await n.initialize();let s=_r(o.source);if(!o.force){let r=n.findExtension(s);if(r)throw new F(`Extension "${r.manifest.name}" is already installed. Use --force to reinstall.`)}let i=await n.installExtension(s,{source:e,version:o.version,force:o.force});o.enable&&await n.enableExtension(i.manifest.name),console.log(a.cyan('\u{1F4A1} Run "freedom extension list" to see installed extensions'))}catch(e){throw e instanceof F&&(console.error(a.red("\u274C Installation failed:"),e.message),Vs.default.exit(1)),e}}};function vr(o){return o.includes("://")&&(o.includes("github.com")||o.includes("gitlab.com")||o.endsWith(".git"))?"git":o.includes("/")||o.includes("\\")||o.startsWith(".")||o.startsWith("~")?"local":"registry"}function _r(o){if(o.includes("://")){let e=o.split("/");return e[e.length-1].replace(".git","")}if(o.includes("/")){let e=o.split(/[/\\]/);return e[e.length-1]}return o}var Hs=V(require("node:process"),1);var qs={command:"list",describe:"List installed extensions",builder:o=>o.option("enabled-only",{describe:"Show only enabled extensions",type:"boolean",default:!1}).option("format",{alias:"f",describe:"Output format",type:"string",choices:["table","json","plain"],default:"table"}).option("show-disabled",{describe:"Include disabled extensions",type:"boolean",default:!0}),handler:async o=>{try{console.log(a.blue("\u{1F4E6} Freedom Extensions:")),o["enabled-only"]&&console.log(a.gray("Filter: Enabled extensions only")),console.log(a.gray(`Format: ${o.format}`)),console.log();let e=[{name:"genshin-auto-daily",version:"1.2.0",enabled:!0,description:"Automated daily commissions",author:"freedom-community"},{name:"resin-optimizer",version:"0.8.1",enabled:!1,description:"Optimize resin usage",author:"user123"}];if(e.length===0){console.log(a.yellow("No extensions installed")),console.log(a.cyan('\u{1F4A1} Use "freedom extension install <name>" to install extensions'));return}if(o.format==="json"){console.log(JSON.stringify(e,null,2));return}e.forEach(t=>{let n=t.enabled?a.green("\u2705 Enabled"):a.gray("\u274C Disabled");o.format==="table"?(console.log(`${a.cyan(t.name.padEnd(20))} ${a.white("\u2502")} ${t.version.padEnd(8)} ${a.white("\u2502")} ${n}`),t.description&&console.log(`${" ".repeat(20)} ${a.white("\u2502")} ${a.gray(t.description)}`)):(console.log(`${a.cyan(t.name)} (${t.version}) - ${n}`),t.description&&console.log(`  ${a.gray(t.description)}`)),console.log()}),console.log(a.gray(`Found ${e.length} extension(s)`)),console.log(a.yellow("\u26A0\uFE0F  Extension system not yet fully implemented"))}catch(e){console.error(a.red("\u274C Failed to list extensions:"),e instanceof Error?e.message:"Unknown error"),Hs.default.exit(1)}}};var Ks=V(require("node:process"),1);var Js={command:"uninstall <name>",describe:"Uninstall an extension",builder:o=>o.positional("name",{describe:"Name of extension to uninstall",type:"string",demandOption:!0}).option("keep-data",{alias:"k",describe:"Keep extension data and configuration after uninstall",type:"boolean",default:!1}).option("force",{alias:"f",describe:"Force uninstall without confirmation",type:"boolean",default:!1}).option("backup",{alias:"b",describe:"Create backup before uninstall",type:"boolean",default:!0}),handler:async o=>{try{if(console.log(a.red(`\u{1F4E4} Uninstalling extension: ${a.cyan(o.name)}`)),console.log(a.gray(`Keep data: ${o["keep-data"]?"Yes":"No"}`)),console.log(a.gray(`Backup: ${o.backup?"Yes":"No"}`)),console.log(a.gray(`Force: ${o.force?"Yes":"No"}`)),console.log(),console.log(),!o.force){console.log(a.yellow("\u26A0\uFE0F  Interactive confirmation not yet implemented")),console.log(a.cyan("\u{1F4A1} Use --force to skip confirmation"));return}console.log(a.green("\u2705 Extension uninstallation completed")),console.log(a.yellow("\u26A0\uFE0F  Extension uninstallation not yet implemented")),o["keep-data"]?console.log(a.gray("Extension data preserved")):console.log(a.gray("Extension data and configuration removed"))}catch(e){throw e instanceof F&&(console.error(a.red("\u274C Uninstallation failed:"),e.message),Ks.default.exit(1)),e}}};var Qs={command:"extension <command>",describe:"Manage Freedom extensions",builder:o=>o.command(qs).command(Ys).command(Js).command(Bs).command(Gs).demandCommand(1,a.red("You need to specify an extension command.")).help(),handler:()=>{}};var Zs={command:"restart",describe:"Restart the current game automation session",builder:o=>o.option("preserve-state",{alias:"p",describe:"Preserve current session state during restart",type:"boolean",default:!0}).option("delay",{alias:"d",describe:"Delay between stop and start in seconds",type:"number",default:3}).option("profile",{describe:"Use different profile for restart",type:"string"}),handler:async o=>{try{console.log(a.yellow("\u{1F504} Restarting game automation session...")),o["preserve-state"]&&console.log(a.blue("\u{1F4BE} Preserving session state...")),console.log(a.red("\u{1F6D1} Stopping current session..."));let e=Number(o.delay)||0;e>0&&(console.log(a.gray(`\u23F3 Waiting ${e} seconds before restart...`)),await new Promise(n=>setTimeout(n,e*1e3))),console.log(a.green("\u{1F680} Starting new session..."));let t=o.profile||"default";console.log(a.gray(`Profile: ${t}`)),console.log(a.yellow("\u26A0\uFE0F  Game restart functionality not yet implemented")),console.log(a.green("\u2705 Session restarted successfully (simulated)"))}catch(e){throw e instanceof Error?new F(`Failed to restart game session: ${e.message}`):new F("Failed to restart game session: Unknown error")}}};var Xs={command:"start [profile]",describe:"Start a game automation session",builder:o=>o.positional("profile",{describe:"Game profile to use",type:"string",default:"default"}).option("headless",{alias:"h",describe:"Run in headless mode",type:"boolean",default:ct("automation.headless")}).option("url",{alias:"u",describe:"Game URL to navigate to",type:"string",default:ct("game.url")}).option("region",{alias:"r",describe:"Game region",type:"string",choices:["cn","global"],default:ct("game.region")}).option("timeout",{alias:"t",describe:"Session timeout in seconds",type:"number",default:ct("automation.timeout")}),handler:async o=>{try{console.log(a.green("\u{1F3AE} Starting game automation session...")),console.log(a.gray(`Profile: ${o.profile}`)),console.log(a.gray(`Region: ${o.region}`)),console.log(a.gray(`Headless: ${o.headless?"Yes":"No"}`)),console.log(a.gray(`URL: ${o.url}`)),console.log(a.gray(`Timeout: ${o.timeout}ms`)),console.log(a.yellow("\u26A0\uFE0F  Game automation core not yet implemented")),console.log(a.cyan('\u{1F4A1} Run "freedom debug doctor" to check system requirements'))}catch(e){throw e instanceof Error?new F(`Failed to start game session: ${e.message}`):new F("Failed to start game session: Unknown error")}}};var ei={command:"status",describe:"Show current game automation session status",builder:o=>o.option("verbose",{alias:"v",describe:"Show detailed status information",type:"boolean",default:!1}).option("json",{alias:"j",describe:"Output status in JSON format",type:"boolean",default:!1}),handler:async o=>{try{if(o.json){console.log(JSON.stringify({session:{active:!1,profile:"default",startTime:null,uptime:0},game:{connected:!1,region:"cn",url:null},automation:{running:!1,currentScript:null,tasksCompleted:0},browser:{headless:!1,version:null}},null,2));return}console.log(a.blue("\u{1F4CA} Game Session Status")),console.log(a.gray("\u2500".repeat(40))),console.log(a.red("\u274C No active session")),console.log(`${a.gray("Profile:")} default`),console.log(`${a.gray("Region:")} CN`),console.log(`${a.gray("Last Activity:")} Never`),o.verbose&&(console.log(a.gray(`
\u{1F50D} Detailed Information:`)),console.log(`${a.gray("Browser:")} Not connected`),console.log(`${a.gray("Automation Engine:")} Stopped`),console.log(`${a.gray("Scripts Loaded:")} 0`),console.log(`${a.gray("Extensions:")} 0 active`)),console.log(a.yellow(`
\u26A0\uFE0F  Status checking not yet fully implemented`)),console.log(a.cyan('\u{1F4A1} Run "freedom game start" to begin a session'))}catch(e){throw e instanceof Error?new F(`Failed to get session status: ${e.message}`):new F("Failed to get session status: Unknown error")}}};var ti={command:"stop",describe:"Stop the current game automation session",builder:o=>o.option("force",{alias:"f",describe:"Force stop without saving current progress",type:"boolean",default:!1}).option("save",{alias:"s",describe:"Save current session state before stopping",type:"boolean",default:!0}),handler:async o=>{try{console.log(a.red("\u{1F6D1} Stopping game automation session...")),o.save&&!o.force&&console.log(a.blue("\u{1F4BE} Saving session state...")),o.force&&console.log(a.yellow("\u26A1 Force stopping (progress may be lost)...")),console.log(a.yellow("\u26A0\uFE0F  Game stop functionality not yet implemented")),console.log(a.green("\u2705 Session stopped successfully (simulated)"))}catch(e){throw e instanceof Error?new F(`Failed to stop game session: ${e.message}`):new F("Failed to stop game session: Unknown error")}}};var ni={command:"game <command>",describe:"Manage game automation sessions",builder:o=>o.command(Xs).command(ti).command(ei).command(Zs).demandCommand(1,a.red("You need to specify a game command.")).help(),handler:()=>{}};var oi={command:"create <name>",describe:"Create a new script template",builder:o=>o.positional("name",{describe:"Name for the new script",type:"string",demandOption:!0}).option("template",{alias:"t",describe:"Template to use",type:"string",choices:["basic","daily","farming","combat"],default:"basic"}).option("description",{alias:"d",describe:"Script description",type:"string"}).option("force",{alias:"f",describe:"Overwrite existing script",type:"boolean",default:!1}),handler:async o=>{try{console.log(a.green(`\u{1F4DD} Creating script: ${o.name}`)),console.log(a.gray(`Template: ${o.template}`)),o.description&&console.log(a.gray(`Description: ${o.description}`)),o.force&&console.log(a.yellow("\u26A0\uFE0F  Force mode enabled - will overwrite existing files")),console.log(a.yellow("\u26A0\uFE0F  Script creation not yet implemented")),console.log(a.cyan(`\u{1F4A1} Script will be created at: scripts/${o.name}.ts`))}catch(e){throw e instanceof Error?new F(`Script creation failed: ${e.message}`):new F("Script creation failed: Unknown error")}}};var si={command:"delete <name>",describe:"Delete a script",builder:o=>o.positional("name",{describe:"Name of the script to delete",type:"string",demandOption:!0}).option("force",{alias:"f",describe:"Force deletion without confirmation",type:"boolean",default:!1}).option("backup",{alias:"b",describe:"Create backup before deletion",type:"boolean",default:!0}),handler:async o=>{try{console.log(a.red(`\u{1F5D1}\uFE0F  Deleting script: ${o.name}`)),console.log(a.gray(`Force: ${o.force?"Yes":"No"}`)),console.log(a.gray(`Backup: ${o.backup?"Yes":"No"}`)),console.log(a.yellow("\u26A0\uFE0F  Script deletion not yet implemented")),console.log(a.cyan('\u{1F4A1} Use "freedom script list" to see available scripts'))}catch(e){throw e instanceof Error?new F(`Script deletion failed: ${e.message}`):new F("Script deletion failed: Unknown error")}}};var ii={command:"edit <name>",describe:"Edit an existing script",builder:o=>o.positional("name",{describe:"Name of the script to edit",type:"string",demandOption:!0}).option("editor",{alias:"e",describe:"Editor to use (code, vim, nano, etc.)",type:"string"}),handler:async o=>{try{console.log(a.blue(`\u270F\uFE0F  Opening script for editing: ${o.name}`)),o.editor?console.log(a.gray(`Editor: ${o.editor}`)):console.log(a.gray("Editor: Using system default")),console.log(a.yellow("\u26A0\uFE0F  Script editing not yet implemented")),console.log(a.cyan('\u{1F4A1} Use "freedom script list" to see available scripts'))}catch(e){throw e instanceof Error?new F(`Script editing failed: ${e.message}`):new F("Script editing failed: Unknown error")}}};var ri=V(require("node:process"),1);var ai={command:"list",describe:"List available scripts",builder:o=>o.option("format",{alias:"f",describe:"Output format",type:"string",choices:["table","json","plain"],default:"table"}).option("filter",{describe:"Filter scripts by pattern",type:"string"}),handler:async o=>{try{console.log(a.blue("\u{1F4CB} Available scripts:")),console.log(a.gray(`Format: ${o.format}`)),o.filter&&console.log(a.gray(`Filter: ${o.filter}`)),console.log(a.yellow("\u26A0\uFE0F  Script listing not yet implemented")),console.log(a.cyan('\u{1F4A1} Run "freedom script create <name>" to create your first script'))}catch(e){console.error(a.red("\u274C Failed to list scripts:",e instanceof Error?e.message:"Unknown error")),ri.default.exit(1)}}};var li={command:"run <name>",describe:"Execute a script",builder:o=>o.positional("name",{describe:"Name of the script to run",type:"string",demandOption:!0}).option("args",{alias:"a",describe:"Arguments to pass to the script",type:"array",default:[]}).option("headless",{alias:"h",describe:"Run in headless mode",type:"boolean",default:!1}).option("timeout",{alias:"t",describe:"Script timeout in seconds",type:"number",default:300}).option("dry-run",{describe:"Validate script without executing",type:"boolean",default:!1}),handler:async o=>{try{console.log(a.green(`\u{1F680} Running script: ${o.name}`)),console.log(a.gray(`Headless: ${o.headless?"Yes":"No"}`)),console.log(a.gray(`Timeout: ${o.timeout}s`)),console.log(a.gray(`Dry run: ${o["dry-run"]?"Yes":"No"}`));let e=o.args;e&&e.length>0&&console.log(a.gray(`Arguments: ${e.join(" ")}`)),console.log(a.yellow("\u26A0\uFE0F  Script execution not yet implemented"))}catch(e){throw e instanceof Error?new F(`Script execution failed: ${e.message}`):new F("Script execution failed: Unknown error")}}};var ci={command:"script <command>",describe:"Manage automation scripts",builder:o=>o.command(ai).command(li).command(oi).command(ii).command(si).demandCommand(1,a.red("You need to specify a script command.")).help(),handler:()=>{}};var Et=V(require("node:process"),1),fi=V(require("node:readline"),1);var Xn=class{state={isRunning:!1};getState(){return{...this.state}}setState(e){this.state={...this.state,...e}}},hn=new Xn;var di=require("playwright"),eo=class{constructor(e,t){}on(e,t){}getProgress(){return 0}async login(e,t){return{success:!1,message:"Core not implemented yet",duration:0}}async dispose(){}},pn=class{rl;browser=null;page=null;loginAutomator=null;commands=new Map;constructor(){this.rl=fi.default.createInterface({input:Et.default.stdin,output:Et.default.stdout,prompt:a.green("freedom> ")}),this.setupCommands(),this.setupEventHandlers()}setupCommands(){this.commands.set("/help",{name:"/help",description:"\u663E\u793A\u6240\u6709\u53EF\u7528\u7684\u547D\u4EE4",handler:this.handleHelp.bind(this)}),this.commands.set("/login",{name:"/login",description:"\u81EA\u52A8\u767B\u5F55\u6E38\u620F /login <username> <password> [url]",handler:this.handleLogin.bind(this)}),this.commands.set("/status",{name:"/status",description:"\u663E\u793A\u5F53\u524D\u6E38\u620F\u72B6\u6001",handler:this.handleStatus.bind(this)}),this.commands.set("/config",{name:"/config",description:"\u663E\u793A\u6216\u8BBE\u7F6E\u914D\u7F6E [key] [value]",handler:this.handleConfig.bind(this)}),this.commands.set("/close",{name:"/close",description:"\u5173\u95ED\u6D4F\u89C8\u5668",handler:this.handleClose.bind(this)}),this.commands.set("/exit",{name:"/exit",description:"\u9000\u51FA\u7A0B\u5E8F",handler:this.handleExit.bind(this)})}setupEventHandlers(){this.rl.on("line",this.handleInput.bind(this)),this.rl.on("close",this.handleClose.bind(this)),Et.default.on("SIGINT",this.handleExit.bind(this))}async start(){console.log(a.cyan.bold(`
\u{1F3AE} Freedom Interactive Mode`)),console.log(a.gray(`Type /help to see available commands
`)),this.rl.prompt()}async handleInput(e){let t=e.trim();if(!t){this.rl.prompt();return}if(!t.startsWith("/")){console.log(a.red("\u274C \u547D\u4EE4\u5FC5\u987B\u4EE5 / \u5F00\u5934\uFF0C\u8F93\u5165 /help \u67E5\u770B\u53EF\u7528\u547D\u4EE4")),this.rl.prompt();return}let n=t.split(/\s+/),s=n[0],i=n.slice(1),r=this.commands.get(s);if(!r){console.log(a.red(`\u274C \u672A\u77E5\u547D\u4EE4: ${s}\uFF0C\u8F93\u5165 /help \u67E5\u770B\u53EF\u7528\u547D\u4EE4`)),this.rl.prompt();return}try{await r.handler(i)}catch(c){console.log(a.red(`\u274C \u547D\u4EE4\u6267\u884C\u5931\u8D25: ${c instanceof Error?c.message:String(c)}`))}this.rl.prompt()}async handleHelp(e){console.log(a.cyan.bold(`
\u{1F4D6} \u53EF\u7528\u7684\u659C\u6760\u547D\u4EE4:`));for(let[t,n]of this.commands)console.log(a.white(`  ${t.padEnd(12)} - ${n.description}`));console.log(a.gray(`
\u{1F4A1} \u63D0\u793A:`)),console.log(a.gray("  - \u6240\u6709\u547D\u4EE4\u90FD\u5FC5\u987B\u4EE5 / \u5F00\u5934")),console.log(a.gray("  - \u767B\u5F55\u793A\u4F8B: /login username password")),console.log(a.gray(`  - \u4E0D\u8981\u5728\u7528\u6237\u540D\u5BC6\u7801\u4E2D\u4F7F\u7528\u7A7A\u683C
`))}async handleLogin(e){try{if(e.length<2){console.log(a.red("\u274C \u8BF7\u63D0\u4F9B\u7528\u6237\u540D\u548C\u5BC6\u7801")),console.log(a.gray("\u7528\u6CD5: /login <username> <password> [url]")),console.log(a.gray("\u793A\u4F8B: /login myuser mypass https://ys.mihoyo.com/cloud/"));return}let t=e[0],n=e[1],s=e[2]||"https://ys.mihoyo.com/cloud/",i={username:t,password:n};console.log(a.blue("\u{1F680} \u542F\u52A8\u6D4F\u89C8\u5668...")),this.browser=await di.chromium.launch({headless:!1,args:["--no-sandbox","--disable-setuid-sandbox"]}),this.page=await this.browser.newPage(),this.loginAutomator=new eo(this.page,{loginConfig:{gameUrl:s}}),this.loginAutomator.on("stateChanged",c=>{console.log(a.gray(`\u{1F4CA} ${c.message} (${this.loginAutomator?.getProgress()}%)`))}),console.log(a.blue("\u{1F510} \u5F00\u59CB\u81EA\u52A8\u767B\u5F55..."));let r=await this.loginAutomator.login(i,c=>{let g="\u2588".repeat(Math.floor(c.progress/5)),x="\u2591".repeat(20-Math.floor(c.progress/5));console.log(`[${g}${x}] ${c.progress.toFixed(1)}% - ${c.message}`)});r.success?(console.log(a.green(`\u2705 \u767B\u5F55\u6210\u529F\uFF01\u8017\u65F6: ${(r.duration/1e3).toFixed(2)}\u79D2`)),hn.setState({isRunning:!0,lastActivity:new Date,sessionId:Date.now().toString()}),console.log(a.blue("\u{1F3AE} \u6E38\u620F\u5DF2\u767B\u5F55\uFF0C\u6D4F\u89C8\u5668\u4FDD\u6301\u6253\u5F00\u72B6\u6001"))):(console.log(a.red(`\u274C \u767B\u5F55\u5931\u8D25: ${r.message}`)),r.error&&console.log(a.gray(`\u{1F50D} \u9519\u8BEF\u8BE6\u60C5: ${r.error.message}`)),await this.cleanup())}catch(t){console.log(a.red(`\u{1F4A5} \u767B\u5F55\u8FC7\u7A0B\u4E2D\u53D1\u751F\u9519\u8BEF: ${t instanceof Error?t.message:String(t)}`)),await this.cleanup()}}async handleStatus(e){let t=hn.getState();console.log(a.cyan.bold(`
\u{1F4CA} \u7CFB\u7EDF\u72B6\u6001:`)),console.log(`  \u5185\u5B58\u4F7F\u7528: ${(Et.default.memoryUsage().heapUsed/1024/1024).toFixed(2)}MB`),console.log(a.cyan.bold(`
\u{1F3AE} \u6E38\u620F\u72B6\u6001:`)),console.log(`  \u8FD0\u884C\u72B6\u6001: ${t.isRunning?"\u{1F7E2} \u8FD0\u884C\u4E2D":"\u{1F534} \u672A\u8FD0\u884C"}`),t.sessionId&&console.log(`  \u4F1A\u8BDDID: ${t.sessionId}`),t.lastActivity&&console.log(`  \u6700\u540E\u6D3B\u52A8: ${t.lastActivity.toLocaleString()}`),console.log(a.cyan.bold(`
\u{1F310} \u6D4F\u89C8\u5668\u72B6\u6001:`)),console.log(`  \u6D4F\u89C8\u5668: ${this.browser?"\u{1F7E2} \u5DF2\u8FDE\u63A5":"\u{1F534} \u672A\u8FDE\u63A5"}`),console.log(`  \u9875\u9762: ${this.page?"\u{1F7E2} \u5DF2\u6253\u5F00":"\u{1F534} \u672A\u6253\u5F00"}`),console.log(`  \u81EA\u52A8\u5316: ${this.loginAutomator?"\u{1F7E2} \u5DF2\u521D\u59CB\u5316":"\u{1F534} \u672A\u521D\u59CB\u5316"}`),console.log("")}async handleConfig(e){e.length===0?(console.log(a.cyan.bold(`
\u2699\uFE0F \u57FA\u672C\u914D\u7F6E:`)),console.log("  \u5F53\u524D\u7248\u672C: v0.1.0"),console.log("  \u767B\u5F55URL: https://ys.mihoyo.com/cloud/"),console.log("  \u6D4F\u89C8\u5668\u6A21\u5F0F: \u53EF\u89C6\u5316"),console.log("")):console.log(a.gray("\u{1F4A1} \u63D0\u793A: \u914D\u7F6E\u7BA1\u7406\u529F\u80FD\u6B63\u5728\u5F00\u53D1\u4E2D"))}async handleClose(e){await this.cleanup(),console.log(a.yellow("\u{1F512} \u6D4F\u89C8\u5668\u5DF2\u5173\u95ED"))}async handleExit(e){console.log(a.yellow(`
\u{1F44B} \u6B63\u5728\u9000\u51FA...`)),await this.cleanup(),this.rl.close(),Et.default.exit(0)}async cleanup(){this.loginAutomator&&(await this.loginAutomator.dispose(),this.loginAutomator=null),this.browser&&(await this.browser.close(),this.browser=null,this.page=null),hn.setState({isRunning:!1,lastActivity:new Date})}};function Ar(){console.log(a.cyan.bold(`
 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2557   \u2588\u2588\u2588\u2557
 \u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2551
 \u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2551   \u2588\u2588\u2551\u2588\u2588\u2554\u2588\u2588\u2588\u2588\u2554\u2588\u2588\u2551
 \u2588\u2588\u2554\u2550\u2550\u255D  \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u255D  \u2588\u2588\u2554\u2550\u2550\u255D  \u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2551   \u2588\u2588\u2551\u2588\u2588\u2551\u255A\u2588\u2588\u2554\u255D\u2588\u2588\u2551
 \u2588\u2588\u2551     \u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u255A\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2551 \u255A\u2550\u255D \u2588\u2588\u2551
 \u255A\u2550\u255D     \u255A\u2550\u255D  \u255A\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u255D  \u255A\u2550\u2550\u2550\u2550\u2550\u255D \u255A\u2550\u255D     \u255A\u2550\u255D
  `)),console.log(a.yellow("\u{1F3AE} Freedom - Genshin Impact Automation Tool")),console.log(a.gray(`Version: ${Ot.default.env.CLI_VERSION||"0.1.0"}
`))}async function ui(){Ar();let o=Sn(Ot.default.argv);if(o.length===0){console.log(a.blue("\u{1F4A1} \u8FDB\u5165\u4EA4\u4E92\u5F0F\u6A21\u5F0F...")),console.log(a.gray(`\u8F93\u5165 /help \u67E5\u770B\u53EF\u7528\u547D\u4EE4
`)),await new pn().start();return}let e=ys(o).scriptName("freedom").usage("$0 <command> [options]").command(ni).command(ci).command(Is).command(Qs).command(Us).demandCommand(1,a.red("You need to specify a command.")).help("help","Show help information").alias("help","h").version("version","Show version information",Ot.default.env.CLI_VERSION||"0.1.0").alias("version","v").recommendCommands().strict().wrap(Math.min(120,Ot.default.stdout.columns||80));try{await e.argv}catch(t){console.error(a.red("\u274C Command execution failed:"),t instanceof Error?t.message:"Unknown error"),Ot.default.exit(1)}}Re.default.on("uncaughtException",o=>{console.error("\u274C Uncaught Exception:",o.message),Re.default.env.NODE_ENV==="development"&&console.error(o.stack),Re.default.exit(1)});Re.default.on("unhandledRejection",(o,e)=>{console.error("\u274C Unhandled Rejection at:",e,"reason:",o),Re.default.exit(1)});ui().catch(o=>{o instanceof cn&&(console.error(`\u274C ${o.message}`),Re.default.env.NODE_ENV==="development"&&console.error(o.stack),Re.default.exit(o.exitCode)),console.error("\u274C An unexpected critical error occurred:"),console.error(o.message),Re.default.env.NODE_ENV==="development"&&console.error(o.stack),Re.default.exit(1)});
/*! Bundled license information:

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)
*/
